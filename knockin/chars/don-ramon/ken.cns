; Ken-X's constants and state file.
;
;Variables:
; Var(1) = The win pose decider variable
; Var(2) = Recovery Roll Variable
; Var(3) = Guard Push Var
; Var(4) = Hyper Combo Finish Variable
; Var(5) = Fix for State 5080 >_<
; Var(6) = Danger Sound Variable
; Var(7) = Taunt Variable
; Var(8) = Hyper Combo Finish Variable
; Var(9) = 0 - Normal Ken | 1 - You are now in Burst Mode
; Var(10) = That aerial rave bound onscreen effect.
; Var(11) = Aerial Rave Mode
; Var(13) = Dust Trail Variable
; Var(17) = Super Jump!
; Var(18) = Burning State
; Var(19) = Fireball Still PowerAdds :P
; Var(20) = Turns Mode Intro Pos >_<

[Data]
life = 2950
attack = 210
defence = 60
power = 3000
fall.defence_up = 50
liedown.time = 30
airjuggle = 20
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = -100
IntPersistIndex = 9
FloatPersistIndex = 40

[Size]
xscale = 0.6           ;Horizontal scaling factor.
yscale = 0.6        ;Vertical scaling factor.
ground.back = 20     ;Player width (back, ground)
ground.front = 17    ;Player width (front, ground)
air.back = 20        ;Player width (back, air)
air.front = 17       ;Player width (front, air)
height = 60	     ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too   
head.pos = -5,-90   ;Approximate position of head
mid.pos = -5,-60    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 3.5      ;Walk forward
walk.back = -2.7     ;Walk backward
run.fwd  = 4.6, 0    ;Run forward (x, y)
run.back = -5.2,0    ;Hop backward (x, y)
jump.neu = 0,-7      ;Neutral jumping velocity (x, y)
jump.back = -3,-7         ;Jump back Speed (x, y)
jump.fwd = 3,-7       ;Jump forward Speed (x, y)
runjump.back = -2.55,-9   ;Running jump speeds (opt)
runjump.fwd = 4,-9        ;.
airjump.neu = 0,-9        ;.
airjump.back = -2.55,-9   ;Air jump speeds (opt)
airjump.fwd = 2.5,-9      ;.

[Movement]
airjump.num = 0
yaccel = .35
stand.friction = .8
crouch.friction = .8

;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, Random Win pose]
type = VarRandom
trigger1 = Time = 0
v = 1
range = 1,4

[State 180, Ya Ta De! Pt.2]
type = ChangeState
trigger1 = Var(1) = 1
value = 181

[State 180, Ya ta de! Pt.1]
type = ChangeState
trigger1 = Var(1) = 2
value = 182

[State 180, Yay!]
type = ChangeState
trigger1 = Var(1) = 3
value = 183

[State 180, MSH vs. SF Win Pose!]
type = ChangeState
trigger1 = Var(1) = 4
value = 185

;---------------------------------------------------------------------------
; Win pose 1 - Ya Ta De!
[Statedef 181]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 195, Ya Ta De!]
type = PlaySnd
trigger1 = AnimElem = 1
volume = 100
value = S9000,2


[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 2 - Ya Ta De! Part 2
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 195, Ya Ta De!]
type = PlaySnd
trigger1 = AnimElem = 1
volume = 100
value = S11,1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 3 - Yay!
[Statedef 183]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 195, Yay!]
type = PlaySnd
trigger1 = AnimElem = 1
volume = 100
value = S11,6

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Intro vs. Ryu-X!
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Ta gatsu te bu..!]
type = PlaySnd
trigger1 = AnimElem =  1
value = S8,4

[State 191, Whoosh!]
type = PlaySnd
trigger1 = AnimElem =  7
value = S6,1

[State 191, Kuraie!]
type = PlaySnd
trigger1 = Animtime = 0
value = S8,3

[State 191, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Win pose 4 - MSH vs. SF Win Pose
[Statedef 185]
type = S
ctrl = 0
anim = 901
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S9000,1
volume = 100

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 1
value = 191


;---------------------------------------------------------------------------
; Introduction
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Weak Whoosh]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
value = S6,1

[State 191, Medium Whoosh]
type = PlaySnd
trigger1 = AnimElem = 6
value = S6,2

[State 191, Ikuze!]
type = PlaySnd
trigger1 = AnimElem = 2
volume = 100
value = S9000,0

[State 191, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Turns Mode Introduction
[Statedef 192]
type = S
physics = N
ctrl = 0
anim = 160
velset = 0,0

[State 192, Remember Pos X]
type = VarSet
trigger1 = Time = 0
var(20) = Floor(Pos X)

[State 192, 1]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 191, Intro] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 196, 3]
type = PosAdd
trigger1 = Time = 0
persistent = 0
x = -160
y = -40

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 5
value = 43

[State 192, VelSet]
type = VelSet
trigger1 = Time = 5
x = 4.5
y = -6

[State 192, VelAdd]
type = VelAdd
trigger1 = Time >= 5
y = .39

[State 191, Landing]
type = PosSet
triggerall = Time >= 15
trigger1 = Pos Y >= 0
x = Var(20)
y = 0

[State 191, Landing 2]
type = VelSet
triggerall = Time >= 15
trigger1 = Pos Y >= 0
x = 0
y = 0

[State 191, Landing and Taunt Animation]
type = ChangeAnim
triggerall = Time >= 15
trigger1 = Pos Y >= 0
value = Ifelse(Random < 250, 192, 900)
persistent = 0

[State 723, Landing Dust]
type = Explod
triggerall = Time >= 15
trigger1 = Pos Y >= 0
persistent = 0
anim = 733
ID = 733
pos = -85,-10
postype = p1
sprpriority = -1
bindtime = 1

[State 191, Landing Sound]
type = PlaySnd
triggerall = Time >= 15
trigger1 = Pos Y >= 0
value = 12,0
persistent = 0

[State 191, Ikuze!]
type = PlaySnd
trigger1 = Anim = 192 && AnimElem = 4
value = S4,0

[State 191, Ya Na!]
type = PlaySnd
trigger1 = Anim = 900 && AnimElem = 2
value = S9000,0

[State 191, To Standing]
type = ChangeState
trigger1 = (Anim = 192 || Anim = 900) && (AnimTime = 0)
value = 0
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; Intro vs. Evil Ken!
[Statedef 193]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 0

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 'Wind' (or just the landing dust :P)]
type = Explod
trigger1 = Anim = 194 && AnimElem = 5
anim = 733
ID = 733
pos = -75,-10
postype = p1
sprpriority = -1
removetime = -1
bindtime = 1

[State 191, Wind Go away now]
type = RemoveExplod
trigger1 = Anim = 194 && AnimElem = 6
ID = 733

[State 194, Gah! Darkness!]
type = PlaySnd
trigger1 = Anim = 194 && AnimElem = 2
value = S0,0

[State 194, Begin the Red]
type = EnvColor
trigger1 = Anim = 194 && AnimElem = 1
value = 20,0,0
time = 1

[State 194, Red!]
type = EnvColor
trigger1 = Anim = 194 && AnimElem = 2
value = 100,0,0
time = 1

[State 194, Redder!]
type = EnvColor
trigger1 = Anim = 194 && AnimElem = 3
value = 160,0,0
time = 1

[State 194, Even redder!]
type = EnvColor
trigger1 = Anim = 194 && AnimElem = 4
value = 220,0,0
time = 1

[State 194, Reddest!]
type = EnvColor
trigger1 = Anim = 194 && AnimElem = 5
value = 255,0,0
time = 1

[State 194, White Flash!
type = EnvColor
trigger1 = Anim = 194 && AnimElem = 6
value = 0,255,255
time = 30

[State 194, Shaking!]
type = EnvShake
trigger1 = Anim = 194 && AnimElem = 5
persistent = 0
time = 200
ampl = -2
freq = 100
phase = 1

[State 2075, Intro Text FWD]
type = Helper
trigger1 = (Time = 100) && (facing = 1)
facing = 1
stateno = 194
helpertype = normal
Name = "Evil Ken Intro"
shadow = -1,0,0
keyctrl = 0
ownpal = 1
sprpriority = 1

[State 194, Begin!]
type = ChangeAnim
trigger1 = Time = 500
value = 194

[State 194, Quake]
type = PlaySnd
trigger1 = Anim = 194 && AnimElem = 5
value = S1,10
volume = 255

[State 194, End!]
type = ChangeAnim
trigger1 = Anim = 194 && AnimTime = 0
value = 0

[State 191, Weak Whoosh]
type = PlaySnd
triggerall = Anim = 194
trigger1 = AnimElem = 12
trigger2 = AnimElem = 14
value = S6,1

[State 191, Medium Whoosh]
type = PlaySnd
triggerall = Anim = 194
trigger1 = AnimElem = 16
value = S6,2

[State 191, Ikuze!]
type = PlaySnd
triggerall = Anim = 194
trigger1 = AnimElem = 22
value = S4,0

[State 191, Music]
type = PlaySnd
trigger1 = TimeMod = 430,0
value = S1,11
channel = 1
abspan = 0

[State 191, No Stage Music]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 2075, Intro Text Back]
type = Helper
trigger1 = (Time = 100) && (facing = -1)
facing = -1
stateno = 194
helpertype = normal
Name = "Evil Ken Intro"
shadow = -1,0,0
keyctrl = 0
ownpal = 1
sprpriority = 1

[State 194, Intro Over!]
type = ChangeState
trigger1 = Time = 1300
value = 0

;---------------------------------------------------------------------------
;Text for the Evil Ken Intro
[Statedef 194]
type = S
movetype = A
physics = S
anim = 160
velset = 0,0

[State -2, Intro text]
type = Explod
trigger1 = (Time = 0) && (NumExplod(193) = 0) 
postype = Back
ID = 193
anim = 193
pos = 157,165
bindtime = 1
removetime = -2
sprpriority = 5
ontop = 1

[State 194, 1]
type = DestroySelf
trigger1 = (Time >= 1) && (NumExplod(193) = 0)

;---------------------------------------------------------------------------
;Taunt (Both, now in one state!)
;Taunt Chooser
[Statedef 195]
type = S
ctrl = 1

[State 195, 1]
type = VarRandom
trigger1 = Time = 0
v = 7
range = 1,1

[State 195, 2]
type = Changestate
trigger1 = Var(7) = 1
trigger2 = Var(7) = 2
value = 196

;---------------------------------------------------------------------------
;Taunt (Both, now in one state!)
[Statedef 196]
type = S
movetype = I
ctrl = IfElse(Var(7) = 1, 0, 1)
anim = IfElse(Var(7) = 1, 196, 195)
velset = 0,0,0

[State 195, 2]
type = CtrlSet
trigger1 = (Anim = 195) && (AnimElem = 7)
value = 1
ctrl = 1

[State 195, Ya Ta De!]
type = PlaySnd
trigger1 = (Anim = 195) && (AnimElem = 1)
volume = 100
value = S9000,3


[State 195, Kagatatena!]
type = PlaySnd
trigger1 = (Anim = 196) && (AnimElem = 1)
volume = 100
value = S7000,0
channel = 3

[State 195, 2]
type = StatetypeSet
trigger1 = (Anim = 196)
movetype = A

[State 195, Only if in Taunt 2, kids]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 1
hitflag = MAf
guardflag = MA
pausetime = 11,11
sparkxy = 0,-80
givepower = -50,-150
hitsound   = S1,3
sparkno = 1
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5,-12
air.velocity = -5,-12

[State 195, The End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Dash
[Statedef 100]
type    = A   ;Running is on the ground
physics = N   ;We'll define our own physics
anim = 40   ;Anim action 100
ctrl = 0      ;No control for duration of dash

[State 100, 2]
type = Changestate
trigger1 = Time = 2
value = 101

[State 105, Dashy Lines!]
type = explod
trigger1 = time = 0
anim = 734
postype = p1
pos = 0,0
bindtime = 1
sprpriority = 2
ownpal = 1

;---------------------------------------------------------------------------
[Statedef 101]
type = A
physics = N
anim = 100
velset = 7.5,-2
ctrl = 0

[State 101, Up we go]
type = PosAdd
trigger1 = animelem = 2
y = -5

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[state 101, SprPriority]
type = sprpriority
trigger1 = 1
value = 1

[State 101, Down we go more!]
type = veladd
trigger1 = 1
y = 0.3

[State 101, 9]
type = ChangeState
trigger1 = (vel y > 0) && (pos y >= -5)
value = 102

;----------------------------------------------------------------------------
;Dash Landing
[Statedef 102]
type = S
physics = N
anim = 101
ctrl = 0

[State 731, Screen Bound OFF]
type = Screenbound
triggerall = Prevstateno = 810
trigger1 = 1
value = 0

[State 102, 1]
type = Velset
trigger1 = Time = 0
x = 6.5
y = 0

[State 102, 1]
type = VelAdd
trigger1 = 1
x = -.3
y = 0

[State 102, 1]
type = Posset
trigger1 = Time = 0
y = 0

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 102, 1]
type = Velset
trigger1 = Time = 0
y = 0

[State 100, 2]
type = PlaySnd
trigger1 = Time = 0
value = 8,6

[State 102, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Dash Back
[Statedef 105]
type    = S   ;Running is on the ground
physics = N   ;We'll define our own physics
anim = 105    ;Anim action 100
ctrl = 1      ;No control for duration of dash

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = Nostandguard
flag3 = Nocrouchguard

[State 100, 1] ;To start dashing forwards
type = VelSet
trigger1 = Time = [0,5]
x = -11

[State 100, 2] ;Friction after initial dash
type = VelMul
trigger1 = Time > 5
x = .75

[State 100, 3] ;
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 100, 4]
type = Null ;PlayerPush
trigger1 = Time >= 0
value = 0

[State 100, 5]
type = Null ;AfterImage
trigger1 = Time = 1
time = 25

;---------------------------------------------------------------------------
; STAND_X
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 200
poweradd = 15

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]
trigger1 = Time = 0
x = 0
y = 0

[State 200, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
attr = S, NA
damage    = 15
animtype = Light
getpower = 10,5
givepower = 11,8 
guardflag = MA
hitflag = MAF
pausetime = 8,8
sparkno = 0
sparkxy = 0,-80
hitsound = S1,1
guardsound = S1,0
ground.type = High
ground.slidetime = 2
ground.hittime  = 14
ground.velocity = -6
guard.slidetime = 1
guard.hittime = 1
airguard.velocity = -6
air.velocity = -3
ground.cornerpush.veloff = -3
air.fall = 1
fall.recovertime = 16

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, Whoosh!]
type = PlaySnd
trigger1 = time = 1
value = S6,1

;---------------------------------------------------------------------------
; STAND_Y
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd = 25
ctrl = 0
anim = 210

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]               
trigger1 = Time = 0
x = 0
y = 0

[State 210, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = Time = 0
attr = S, NA    
animtype  = Medium
damage    = 32
getpower = 20,10                  
givepower = 15,8
guardflag = MA
pausetime = 8,8
sparkxy = 0,-80
hitsound   = S1,2
sparkno = 1
guardsound = S1,0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 16
ground.velocity = -2
air.velocity = -5
guard.velocity = -8
guard.slidetime = 1
guard.hittime = 11
airguard.velocity = -6
ground.cornerpush.veloff = -2
air.fall = 1
fall.recovertime = 26

[State 210, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 210, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
; STAND_Z
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 40
ctrl = 0
anim = 220

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]               
trigger1 = Time = 0
x = 0
y = 0

[State 220, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Hard
damage    = 53
getpower = 30,15
givepower = 15,8
guardflag = MA
pausetime = 9,9
sparkno = 2
sparkxy = 0,-80
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 21
ground.hittime  = 24
ground.velocity = -10
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -10
guard.velocity = -10
air.velocity = -4,-5
air.fall = 1
fall.recovertime = 28

[State 220, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 220, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

;---------------------------------------------------------------------------
; STAND_A
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 15
ctrl = 0
anim = 230

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]
trigger1 = Time = 0
x = 0
y = 0

[State 250, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Light
damage    = 15
getpower = 10,5
givepower = 11,8
guardflag = MA
pausetime = 8,8
sparkxy = 0,-40
hitsound   = S1,4
guardsound = S1,0
sparkno = 0
ground.type = Low
ground.slidetime = 1
ground.hittime  = 14
guard.slidetime = 2
guard.hittime = 11
airguard.velocity = -6
ground.velocity = -5.5
air.velocity = -3
ground.cornerpush.veloff = -2.5
air.fall = 1
fall.recovertime = 16

[State 250, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 250, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
; STAND_B
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 25
ctrl = 0
anim = 240

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]               
trigger1 = Time = 0
x = 0
y = 0

[State 241, Respectable Width]
type = Width
trigger1 = 1
edge = 25,5
player = 15,5

[State 260, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = 16
getpower = 20,10
givepower = 12,8
guardflag = MA
pausetime = 8,8
sparkxy = 0,-90
hitsound   = S1,5
guardsound = S1,0
sparkno = 1
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -6
guard.velocity = -8
ground.velocity = -8
air.velocity = -5
air.fall = 1
fall.recovertime = 26

[State 260, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Medium
damage    = 16
getpower = 20,10
givepower = 12,8
guardflag = MA
pausetime = 8,8
sparkxy = 0,-90
hitsound   = S1,5
guardsound = S1,0
sparkno = 1
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -6
guard.velocity = -8
ground.velocity = -8
air.velocity = -5
air.fall = 1
fall.recovertime = 26

[State 260, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 260, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2


[State 260, 4]
type = PosAdd
trigger1 = AnimElem = 2
x = 15

;---------------------------------------------------------------------------
; Axe Kick!
[Statedef 241]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 50
ctrl = 0
anim = 241

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]               
trigger1 = Time = 0
x = 0
y = 0

[State 241, Respectable Width]
type = Width
trigger1 = 1
edge = 25,5
player = 15,5

[State 280, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 35
guardflag = HA
pausetime = 9,7
sparkxy = 0,-90
getpower = 10,5
givepower = 11,8
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 17
ground.velocity = -5
air.velocity = -2.2,-3.2
sparkno = 1

[State 280, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 7
attr = S, NA
animtype  = Medium
damage    = 40
guardflag = HA
pausetime = 9,7
sparkxy = 0,-90
getpower = 10,5
givepower = 11,8
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 17
ground.velocity = -5
air.velocity = -2.2,-3.2
sparkno = 1

[State 280, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 8
attr = S, NA
animtype  = Medium
damage    = 40
getpower = 10,5
givepower = 11,8
guardflag = HA
pausetime = 9,9
sparkxy = 0,-60
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 17
ground.velocity = -5
air.velocity = -2.2,-3.2
sparkno = 1

[State 241, Back to Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 241, Huh!]
type = PlaySnd
trigger1 = AnimElem = 1
volume = 100
value = S6000,0


[State 241, Tuah!]
type = PlaySnd
trigger1 = AnimElem = 6
volume = 100
value = S6000,2

[State 241, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 5
value = S6,2

[State 280, 4]
type = VelSet
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
x = 1.5

;---------------------------------------------------------------------------
; STAND_C
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 55
ctrl = 0
anim = 250

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]
trigger1 = Time = 0
x = 0
y = 0

[State 241, Respectable Width]
type = Width
trigger1 = 1
edge = 25,5
player = 15,5

[State 270, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Back
damage    = 75
guardflag = MA
pausetime = 9,9
sparkxy = 0,-50
getpower = 30,15
givepower = 15,8
hitsound   = S1,6
guardsound = S1,0
ground.type = Low
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -10
guard.velocity = -10
ground.velocity = -12,-6
air.velocity = -12,-6
sparkno = 2
fall = 1
fall.recover = 1
p2stateno = 251
fall.envshake.time = 20
fall.envshake.freq = 180
fall.envshake.ampl = 3
fall.envshake.phase = 90

[State 270, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 270, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3



[State 270, 4]
type = PosAdd
trigger1 = AnimElem = 2
x = 15

;---------------------------------------------------------------------------
; Sunboy's XmvSF Style Knock Back! (HitPause)
[Statedef 251]
type = A
movetype = H
physics = N
velset = 0,0
facep2 = 1
anim = 5002
sprpriority = -1
ctrl = 0

[State 1230, Can't hit me!]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA

[State 1240, PosFreeze]
type = PosFreeze
trigger1 = 1

[State 1240, Calm down!]
type = ChangeState
trigger1 = HitShakeOver
value = 252

;---------------------------------------------------------------------------
; Sunboy's XmvSF Style Knock Back!
[Statedef 252]
type = A
movetype = H
physics = N
velset = 0,0
facep2 = 1
sprpriority = -1
ctrl = 0

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 1230, XmvSF Death]
type = VelSet
trigger1 = !Alive
x = -6
y = -18

[State 1230, XmvSF Death Part 2]
type = SelfState
trigger1 = !Alive
value = 5050

[State 1230, Velset]
type = HitVelSet
trigger1 = Alive && Time = 0
x = 1
y = 1

[State 1230, Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = .85

[State 1230, Recoba!]
type = ChangeState
trigger1 = Time > 6
trigger1 = Pos Y >= 0
value = 254

[State 1230, Hit the wall!]
type = ChangeState
trigger1 = Time > 6
trigger1 = BackEdgeDist < 10
value = 253

;---------------------------------------------------------------------------
; Hit the wall and falling (Sunboy's Xmen vs. SF Knock Back Code)
[Statedef 253]
type = A
movetype = H
physics = N
velset = 0
ctrl = 0

[State 5050, Into Coming Down NOW!]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 1231, Major Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = .75

[State 1230, Wall hit noise!]
type = PlaySnd
trigger1 = !Time
value = F7,1

[State 1231, Shaking!]
type = EnvShake
trigger1 = !Time
time = 10
ampl = -4

[State 1231, Wall hit spark!]
type = Explod
trigger1 = !Time
anim = F72
ontop = 1
postype = p1
pos = (BackEdgeDist),-60
pausemovetime = 9999999999999999999999
supermovetime = 9999999999999999999999

[State 1231, No falling when grounded.]
type = VelSet
trigger1 = Pos Y >= 10
y = 0

[State 1231, Pos Y shall be 0]
type = PosSet
trigger1 = Pos Y >= 10
y = 10

[State 1231, Calm down!]
type = ChangeState
trigger1 = Pos Y >= 10
value = 254

;---------------------------------------------------------------------------
; Sunboy's Xmen vs. SF style Knock Back Code - My addition: Recovering!
[Statedef 254]
type = A
movetype= I
physics = N
anim = 5210
velset = Vel X,-3.5
ctrl = 0

[State 661, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1231, Shaking!]
type = EnvShake
trigger1 = !Time
time = 10
ampl = -4

[State 5100, 8]
type = GameMakeAnim
trigger1 = !Time
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5100, 10]
type = PlaySnd
trigger1 = !Time
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time > 4
y = .39

[State 5210, 5] ;Land on ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; Burst Mode Ushiro Mawashi Geri
[Statedef 259]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 70
ctrl = 0
anim = 251
sprpriority = 2

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]               
trigger1 = Time = 0
x = 0
y = 0

[State 251, Width 1]
type = Width
trigger1 = time <= 10
value = IfElse(Time <= 5, 25, 30)

[State 251, Width 2]
type = Width
trigger1 = time = [11,23]
value = IfElse(Time >= 11 && Time <= 15, 35, 40)

[State 251, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 5
value = S6,3

[State 251, Tuah!]
type = PlaySnd
trigger1 = AnimElem = 4
volume = 100
value = S6000,3

[State 251, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Heavy
damage    = 100, 10
hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 14,10
sparkno = 2
sparkxy = 0,-50
hitsound   = S1,6
guardsound = S1,0
ground.type = Low
p2stateno = 251
ground.slidetime = 30
ground.hittime  = 25
ground.velocity = -19,-7
air.velocity = -19,-7
fall = 1
fall.recover = 0
yaccel = .25
fall.envshake.time = 20
fall.envshake.freq = 180
fall.envshake.ampl = 3
fall.envshake.phase = 90

[State 251, Forward a little]
type = PosAdd
trigger1 = time = [16,21]
x = 4

[State 251, Forward a bit more]
type = PosAdd
trigger1 = animtime = 0
x = 12

[State 251, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;CROUCH_X
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 15
ctrl = 0
anim = 400

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 400, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
attr = C, NA
damage    = 15
animtype  = Light
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = L
pausetime = 8,8
sparkxy = 0,-50
hitsound   = S1,1
guardsound = S1,0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 14
guard.slidetime = 1
guard.hittime = 1
airguard.velocity = -6
ground.velocity = -6
air.velocity = -3
sparkno = 0
ground.cornerpush.veloff = -1
air.fall = 1
fall.recovertime = 16

[State 400, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 400, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
;CROUCH_Y
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 25
ctrl = 0
anim = 410

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 410, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 3
attr = C, NA
damage    = 32
getpower  = 20
givepower = 20
animtype = Medium
hitflag = MAf
guardflag = MAf
pausetime = 8,8
sparkxy = 0,-50
hitsound   = S1,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 14
guard.slidetime = 1
guard.hittime = 1
airguard.velocity = -6
guard.velocity = -8
sparkno = 1
ground.velocity = -2
air.velocity = -2.2,2
ground.cornerpush.veloff = -2
air.fall = 1
fall.recovertime = 26

[State 410, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 410, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
; CROUCH_Z (Launcher)
[Statedef 420]
type    = C                      
movetype= A                      
physics = C                      
juggle  = 1                    
ctrl = 0                         
anim = 420                      
       
[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 250, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = Time = 0
attr = S, NA                     
damage = 45                  
animtype = Heavy
guardflag = MA    
hitflag = MAf      
getpower = 30,15
givepower = 15,8
pausetime = 9,9
sparkno = 2
sparkxy = 0,-70
hitsound = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0 ,-11.5       
airguard.velocity = -1.8,-.8
yaccel = Const(movement.yaccel)
guard.velocity = -12
air.type = High
air.velocity = 0,-10
air.juggle = 4
air.slidetime = 20
air.hittime = 20 
air.fall = 1
fall.recovertime = 45
ground.cornerpush.veloff = -5

[State 250, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3



[State 250, 5]
type = ChangeState
trigger1 = MoveContact
trigger1 = !MoveGuarded
trigger1 = command = "holdup"
value = 55650
ctrl = 1

[State 250, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;CROUCH_A
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 15
ctrl = 0
anim = 430

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 430, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
attr = C, NA
damage    = 30
animtype  = Light
getpower  = 10
givepower = 8
hitflag = MAFD
guardflag = L
pausetime = 8,8
sparkxy = 0,-20
hitsound   = S1,4
guardsound = S1,0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 13
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -2
ground.velocity = -2
air.velocity = -.3,-3
down.velocity = -3,-6
air.hittime = 12
sparkno = 0
ground.cornerpush.veloff = -1
air.fall = 1
fall.recover = 0

[State 400, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 400, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
;CROUCH_B
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 30
ctrl = 0
anim = 440

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 430, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 3
attr = C, NA
damage    = 44
animtype  = Med
getpower  = 20
givepower = 20
hitflag = MAFD
guardflag = L
pausetime = 8,8
sparkxy = 0,-20
hitsound   = S1,5
guardsound = S1,0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 17
air.velocity = -.3,-3
down.velocity = -3,-6
air.hittime = 12
sparkno = 1
ground.velocity = -2
air.velocity = -2.2,-2
ground.cornerpush.veloff = -3
air.fall = 1
fall.recover = 0

[State 400, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 400, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
;CROUCH_C (Trip)
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 40
ctrl = 0
anim = 450

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 450, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
attr = C, NA
damage    = 45
animtype  = High
getpower = 30,15
givepower = 15,8
hitflag = MAFD
guardflag = L
pausetime = 9,9
sparkxy = 0,-20
hitsound   = S1,6
guardsound = S1,0
ground.type = Trip
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -1.5,-4
guard.hittime = 36
guard.ctrltime = 36
air.velocity = -4,-3
airguard.velocity = -3,-3
guard.velocity = -6
sparkno = 2
fall = 1

[State 450, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 450, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

;---------------------------------------------------------------------------
;JUMP_X
[Statedef 600]
type    = A
movetype= A
physics = A
juggle = 2
poweradd= 15
ctrl = 0
anim = 600

[State 600, 3]
type = HitDef
triggerall = Var(11) = 0
trigger1 = AnimElem = 2
attr = A, NA
animtype = Light
damage    = 15
getpower  = 10
givepower = 10
guardflag = HA
priority = 3, Hit
pausetime = 8,8
sparkno = 0
sparkxy = -10,-70
hitsound = S1,1
guardsound = S1,0
ground.type = High
ground.slidetime = 10
ground.hittime = 12
ground.velocity = -5
guard.slidetime = 12
guard.hittime = 12
air.hittime = 16
air.velocity = -1,-5
airguard.velocity = -6
air.fall = 1
fall.recovertime = 25

[State 600, 3]
type = HitDef
triggerall = Var(11) = 1
trigger1 = AnimElem = 2
attr = A, NA
animtype = Light
damage    = 15
getpower  = 10
givepower = 10
guardflag = HA
priority = 3, Hit
pausetime = 8,8
sparkno = 0
sparkxy = -10,-70
hitsound = S1,1
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 8
ground.velocity = -4
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * .9,-5)
air.hittime = 9
yaccel = Const(movement.yaccel)
air.fall = 1
fall.recovertime = 25

[State 600, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 600, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
;JUMP_Y
[Statedef 610]
type    = A
movetype= A
physics = A
juggle = 2
poweradd= 25
ctrl = 0
anim = 610

[State 610, 3]
type = HitDef
triggerall = Var(11) = 0
trigger1 = AnimElem = 3
attr = A, NA
animtype = Medium
damage    = 22
getpower  = 20
givepower = 15
guardflag = HA
priority = 3, Hit
pausetime = 8,8
sparkno = 1
sparkxy = -10,-70
hitsound = S1,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 15
ground.velocity = -5
guard.slidetime = 12
guard.hittime = 12
guard.velocity = -15
air.hittime = 16
air.velocity = -1,-5
airguard.velocity = -6
air.fall = 1
fall.recovertime = 25

[State 610, 3]
type = HitDef
triggerall = Var(11) = 1
trigger1 = AnimElem = 3
attr = A, NA
animtype = Medium
damage    = 22
getpower  = 20
givepower = 15
guardflag = HA
priority = 3, Hit
pausetime = 8,8
sparkno = 1
sparkxy = -10,-70
hitsound = S1,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 15
ground.velocity = -5
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * .9,-5)
air.hittime = 12
yaccel = Const(movement.yaccel)
air.fall = 1
fall.recovertime = 25

[State 610, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 610, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
;JUMP_Z
[Statedef 620]
type    = A
movetype= A
physics = A
juggle = 1
poweradd= 40
ctrl = 0
anim = 620

[State 620, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
guardflag = HA
animtype = Hard
damage = 45
getpower = 30,15
givepower = 15,8
pausetime = 9,9
sparkno = 2
sparkxy = 10,-70
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
air.type = Low
ground.slidetime = 21
ground.hittime  = 19
ground.velocity = -6
air.velocity = ifelse(Var(11) = 0,-6,-12),ifelse(Var(11) = 0,3,12)
airguard.velocity = -6,1
yaccel = Const(movement.yaccel)
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
fall.envshake.ampl = 5

[State 620, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = IfElse(Movecontact && P2statetype = A, 50, 51)
ctrl = 1

[State 620, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 620, Aerial RAVE!]
type = Varset
trigger1 = movehit && prevstateno = [600,641]
var(10) = 1

[State 600, 5]
type = VelSet
trigger1 = (P2Statetype = A) && (movecontact)
x = Vel X * .9
y = .2

;---------------------------------------------------------------------------
;JUMP_A 
[Statedef 630]
type    = A
movetype= A
physics = A
juggle = 2
poweradd= 15
ctrl = 0
anim = 630

[State 630, 3]
type = HitDef
triggerall = Var(11) = 0
trigger1 = AnimElem = 3
attr = A, NA
animtype = Light
damage    = 15
getpower  = 10
givepower = 8
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 0
sparkxy = -5,-60
hitsound = S1,4
guardsound = S1,0
ground.type = High
ground.slidetime = 10
ground.hittime = 12
ground.velocity = -5
guard.slidetime = 12
guard.hittime = 12
air.hittime = 16
air.velocity = -1,-5
airguard.velocity = -6
air.fall = 1
fall.recovertime = 25

[State 630, 3]
type = HitDef
triggerall = Var(11) = 1
trigger1 = AnimElem = 3
attr = A, NA
animtype = Light
damage    = 15
getpower  = 10
givepower = 8
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = 0
sparkxy = -5,-60
hitsound = S1,4
guardsound = S1,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 14
ground.velocity = -4
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * .9,-5)
air.hittime = 12
yaccel = Const(movement.yaccel)
air.fall = 1
fall.recovertime = 25

[State 630, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 630, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
;JUMP_B (holding up)
[Statedef 640]
type    = A
movetype= A
physics = A
juggle = 2
poweradd= 25
ctrl = 0
anim = 640

[State 640, 3]
type = HitDef
triggerall = Var(11) = 0
trigger1 = AnimElem = 2
attr = A, NA
animtype = Medium
damage    = 22
getpower  = 20
givepower = 15
guardflag = HA
priority = 3
sparkno = 1
pausetime = 8,8
sparkxy = 5,-80
hitsound = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 14
ground.hittime = 15
ground.velocity = -5
guard.slidetime = 12
guard.hittime = 12
guard.velocity = -15
air.hittime = 16
air.velocity = -1,-5
airguard.velocity = -6
air.fall = 1
fall.recovertime = 25

[State 640, 3]
type = HitDef
triggerall = Var(11) = 1
trigger1 = AnimElem = 2
attr = A, NA
animtype = Medium
damage    = 22
getpower  = 20
givepower = 15
guardflag = HA
priority = 3
sparkno = 1
pausetime = 8,8
sparkxy = 5,-80
hitsound = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 15
ground.velocity = -5
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * .9,-5)
air.hittime = 12
yaccel = Const(movement.yaccel)
air.fall = 1
fall.recovertime = 25

[State 640, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 640, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
;JUMP_C (holding up)
[Statedef 650]
type    = A
movetype= A
physics = A
poweradd= 40
juggle = 1
ctrl = 0
anim = 650

[State 650, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
guardflag = HA
animtype = Hard
damage = 45
getpower = 30,15
givepower = 15,8
pausetime = 9,9
sparkno = 2
sparkxy = -10,-60
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.type = Low
ground.slidetime = 21
ground.hittime  = 19
ground.velocity = -6
air.velocity = ifelse(Var(11) = 0,-6,-12),ifelse(Var(11) = 0,3,12)
airguard.velocity = -6,1
yaccel = Const(movement.yaccel)
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
fall.envshake.ampl = 5

[State 620, Aerial RAVE!]
type = Varset
trigger1 = movehit && prevstateno = [600,641]
var(10) = 1

[State 650, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = IfElse(Movecontact && P2statetype = A, 50, 51)
ctrl = 1

[State 650, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 600, 5]
type = VelSet
trigger1 = (P2Statetype = A) && (movecontact)
x = Vel X * .9
y = .2

;---------------------------------------------------------------------------
;JUMP_B (Normal)
[Statedef 641]
type    = A
movetype= A
physics = A
poweradd= 25
juggle = 2
ctrl = 0
anim = 641

[State 640, 3]
type = HitDef
triggerall = Var(11) = 0
trigger1 = AnimElem = 4
attr = A, NA
animtype = Medium
damage    = 32
getpower  = 20
givepower = 15
guardflag = HA
priority = 3
sparkno = 1
pausetime = 8,8
sparkxy = -15,-70
hitsound = S1,5
guardsound = S1,0
ground.type = High
air.type = Low
ground.slidetime = 14
ground.hittime = 15
ground.velocity = -5
guard.slidetime = 12
guard.hittime = 12
guard.velocity = -15
air.hittime = 16
air.velocity = -1,-5
airguard.velocity = -6
air.fall = 1
fall.recovertime = 25

[State 640, 3]
type = HitDef
triggerall = Var(11) = 1
trigger1 = AnimElem = 4
attr = A, NA
animtype = Medium
damage    = 22
getpower  = 20
givepower = 15
guardflag = HA
priority = 3
sparkno = 1
pausetime = 8,8
sparkxy = -15,-70
hitsound = S1,5
guardsound = S1,0
ground.type = High
air.type = Low
ground.slidetime = 16
ground.hittime  = 15
ground.velocity = -5
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * .9,-5)
air.hittime = 12
yaccel = Const(movement.yaccel)
air.fall = 1
fall.recovertime = 25

[State 670, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 670, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
;JUMP_C (Normal)
[Statedef 651]
number = 10
type    = A
movetype= A
physics = A
poweradd= 40
juggle = 1
ctrl = 0
anim = 651

[State 651, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
guardflag = HA
animtype = Hard
damage = 68
getpower = 30,15
givepower = 15,8
pausetime = 9,9
sparkno = 2
sparkxy = -15,-70
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.type = Low
ground.slidetime = 21
ground.hittime  = 19
ground.velocity = -6
air.velocity = ifelse(Var(11) = 0,-6,-12),ifelse(Var(11) = 0,3,12)
airguard.velocity = -6,1
yaccel = Const(movement.yaccel)
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
fall.envshake.ampl = 5

[State 620, Aerial RAVE!]
type = Varset
trigger1 = movehit && prevstateno = [600,641]
var(10) = 1

[State 680, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = IfElse(Movecontact && P2statetype = A, 50, 51)
ctrl = 1

[State 680, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 600, 5]
type = VelSet
trigger1 = (P2Statetype = A) && (movecontact)
x = Vel X * .9
y = .2

;---------------------------------------------------------------------------
; Punch Throw Grabbing
[Statedef 660]
type    = S
movetype= A
physics = S
ctrl = 0
juggle  = 8
velset = 0,0
anim = 670
sprpriority = 2

[State 660, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NT   
p2facing = 1
p1facing = ifelse(command = "holdfwd",-1,1)
hitflag = M-
getpower = 30,15                  
givepower = 15,8
priority = 2, Miss
sparkno = -1
hitsound = S1,9
p1stateno = 661
p2stateno = 662
fall.yvelocity = -.2
p2getp1state = 1
fall = 1
kill = 0

[State 660, Damn]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw 1 - Rolling Throw (P1 State)
[Statedef 661]
type = S
movetype = A
physics = S
anim = 660
velset = 0,0
sprpriority = 2

[State 661, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 661, Yeah!]
type = PlaySnd
trigger1 = Time = 0
volume = 100
value = S6000,1

[State 661, Bind]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 40, 0

[State 661, Edge]
type = Width
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(12) < 0
edge = 50, 40

[State 661, Bind 2]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 10, 0

[State 661, Bind 3]
type = targetbind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
trigger2 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 0, -60

[State 661, Bind 4]
type = targetbind
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
trigger2 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
pos = -28, -77

[State 661, Bind 5]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
trigger2 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
pos = 10,-5

[State 661, Bind 6]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
trigger2 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
pos = 25,0

[State 661, 3]
type = VelSet
trigger1 = AnimElem = 3
y = -2.4

[State 661, PosAdd]
type = PosAdd
trigger1 = Time = [24,64] 
x = -4

[State 661, 4]
type = VelAdd
trigger1 = time = [29,59]
y = 0.17

[State 661, 5]
type = VelSet
trigger1 = animElem = 11
x = 0
y = 0

[State 661, 6]
type = PosSet
trigger1 = AnimElem = 11
y = 0

[State 661, 7]
type = envshake
trigger1 = Animelem = 11
time = 15
ampl = -2
freq = 120

[State 661, Bind 7]
type = TargetBind
trigger1 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
pos = -10,-50


[State 661, Yeah!]
type = PlaySnd
trigger1 = AnimElem = 11
volume = 100
value = S6000,2

[State 661, Hit+]
type = HitAdd
trigger1 = AnimElem = 11
value = 1

[State 661, Away we go!]
type = TargetState
trigger1 = AnimElem = 12
value = 663

[State 661, Ouch!]
type = targetlifeadd
trigger1 = AnimElem = 12
value = -150

[State 661, Turn Around]
type = Turn
trigger1 = AnimTime = 0
value = 1

[State 710, Tech Hit!]
type = ChangeState
trigger1 = Time < 23 && (numtarget = 0) ; abort if opponent escaped somehow
value = 680

[State 661, Back to standing with you!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
; Throw 1 - Rolling Throw (P2 State)
[Statedef 662]
type = A
movetype = H
physics = N
sprpriority = 0

[State 662, 1]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 662, 2]
type = ChangeAnim2
trigger1 = time = 0
value = 661

[State 720, 3] ; Recover in mid air (use SelfState)
type = SelfState
trigger1 = alive
trigger1 = time > 5 && time < 10
trigger1 = CanRecover
trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
value = 5210 ;HITFALL_AIRRECOVER

;------------------------------------
; Throw 1 - Rolling Throw (P2 State) Part 2
[Statedef 663]
type = A
movetype = H
physics = N
velset = 7,-7
sprpriority = 1

[State 663, 1]
type = PosAdd
trigger1 = time = 0
y = -10
x = 10

[State 663, 2]
type = Turn
trigger1 = time = 0

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, Gravity]
type = VelAdd
trigger1 = 1
y = .39

[State 663, Hitting the Ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100 

;---------------------------------------------------------------------------
; Throw 2 - Air Throw (Grab)
[Statedef 670]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 671

[State 670, 1]
type = HitDef
trigger1 = Time = 0
attr = A, NT   
p2facing = 1
p1facing = 1
hitflag = AF
getpower = 30,15
givepower = 15,8
priority = 2, Miss
sparkno = -1
hitsound = S1,9
damage = 70
p1stateno = 671
p2stateno = 673
fall.yvelocity = -.2
p2getp1state = 1
fall = 1
kill = 0

[State 671, Damn!]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Throw 2 - Air Throw (P1 State - Air)
[Statedef 671]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,-.05

[State 822, 1]
type = velset 
trigger1 = Time = 15
x = 4
y = -1.5

[State 822, 3]
type = TargetBind
trigger1 = Time != 0
pos = 0,0

[State 822, 2]
type = VelAdd
triggerall = Time > 15
trigger1 = 1
y = .39

[State 710, Tech Hit!]
type = ChangeState
trigger1 = Time < 15 && (numtarget = 0) ; abort if opponent escaped somehow
value = 681

[State 822, On the Ground]
type = ChangeState
trigger1 = (pos y > 0) && (time != 0)
value = 672

[State 822, 2]
type = ChangeAnim
trigger1 = time = 0
value = 680

[State 661, Yeah!]
type = PlaySnd
trigger1 = TIme = 0
volume = 100
value = S6000,1
;---------------------------------------------------------------------------
; Throw 2 - Air Throw (P1 - Ground)
[Statedef 672]
type = S
movetype = A
physics = S
ctrl = 0
anim = 681
velset = 0,0,0

[State 803, 1]
type = Turn
trigger1 = Time = 0

[State 803, 1]
type = TargetBind
trigger1 = animelem = 1
pos = 11, -18

[State 803, 1]
type = TargetState
trigger1 = Time = 2
value = 674



[State 803, Hit+]
type = Hitadd
trigger1 = time = 2
value = 1

[State 661, Ouch!]
type = targetlifeadd
trigger1 = Time = 2
value = -100

[State 803, 1]
type = PosSet
trigger1 = animelem = 1
y = 0

[State 803, Turning is Neat]
type = Turn
trigger1 = Animtime = 0

[State 803, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw 2 - Air Throw (P2 State)
[Statedef 673]
type = S
movetype = H
physics = N
ctrl = 0

[State 801, 2]
type = ChangeAnim2
trigger1 = time = 0
value = 682

[State 812, 3]
type = VelSet
trigger1 = Time = 54
x = -3
y = -3

[State 720, 3] ; Recover in mid air (use SelfState)
type = SelfState
trigger1 = alive
trigger1 = time > 5 && time < 10
trigger1 = CanRecover
trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
value = 5210 ;HITFALL_AIRRECOVER

;------------------------------------
; Throw 2 - Air Throw (P2 State) Part 2
[Statedef 674]
type = A
movetype = H
physics = N
velset = -7,-7
sprpriority = 1

[State 663, 1]
type = PosAdd
trigger1 = time = 0
y = -10
x = 10

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, Gravity]
type = VelAdd
trigger1 = 1
y = .39

[State 663, Hitting the Ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100 

;---------------------------------------------------------------------------
; You've been TECH HIT! (Ground)
[Statedef 680]
type = S
movetype= I
physics = S
anim = 690
velset = -5,0

[State 720, Guh!]
type = PlaySnd
trigger1 = Time = 0
value = S5000,0

[State 720, 1]
type = makedust
trigger1 = time < 20
Trigger1 = Time % 2 = 0
pos = 0,0

[State 720, 1]
type = Changestate
Trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;You've been TECH HIT! (Air)
[Statedef 681]
physics = A
ctrl = 0
velset = -3,-6

[State 720, Guh!]
type = PlaySnd
trigger1 = Time = 0
value = S5000,0

[State 630, 3]
type = Changestate
trigger1 = Time = 6
value = 50

;---------------------------------------------------------------------------
; Kick Throw Grabbing
[Statedef 690]
type    = S
movetype= A
physics = S
ctrl = 0
juggle  = 8
velset = 0,0
anim = 670
sprpriority = 2

[State 660, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NT   
p2facing = 1
p1facing = ifelse(command = "holdfwd",1,-1)
hitflag = M-
priority = 2, Miss
sparkno = -1
getpower = 30,15
givepower = 15,8
damage = 20
hitsound = S1,9
p1stateno = 691
p2stateno = 692
fall.yvelocity = -.2
p2getp1state = 1
fall = 1

[State 660, Damn]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw 3 - Knee Press Nightmare (P1 State)
[Statedef 691]
type = S
movetype = A
physics = S
ctrl = 0
anim = 700

[State 691, 1]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 8
attr = S, NA
damage = 0,0
numhits = 1
animtype  = High
guardflag = MA
sparkxy = -15,-57
p2stateno = 693
chain.id = 100
id = 100
kill = 0

[State 691, Bind 1]
type = TargetBind
trigger1 = time != 0 && AnimElem != 11
trigger2 = time = 0
pos = 34, -3



[State 691, No Pushing]
type = PlayerPush
trigger1 = 1
value = 0

[State 691, Huh!]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 8
volume = 100
value = S77,5



[State 953, 1]
type = HitDef
trigger1 = AnimElem = 11
attr = S, NA
animtype  = High
damage    = 195
guardflag = MA
pausetime = 22,1
numhits = 1
sparkxy = -15,-57
hitsound   = S1,6
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
p2stateno = 674
ground.velocity = -7,-7
air.velocity = -7,-7
fall = 1
fall.recover = 0
fall.yvelocity = -.2
id = 100
chain.id = 100
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 710, Tech Hit!]
type = ChangeState
trigger1 = Time < 19 && (numtarget = 0) ; abort if opponent escaped somehow
value = 680

[State 691, Back to Standing with you!  Your job is over.]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw 3 - Knee Press Nightmare (P2 - Held in place [If it is tech hits that you desire..])
[Statedef 692]
type = S
movetype = H
physics = S
ctrl = 0
velset = 0,0

[State 692, 1]
type = ChangeAnim2
trigger1 = time = 1
value = 701

[State 720, (...thou shalt have it!  Celestial Tech hit!)]
type = SelfState
trigger1 = alive
trigger1 = time > 5 && time < 10
trigger1 = CanRecover
trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
value = 5210 ;HITFALL_AIRRECOVER

[State 692, 2]
type = VelSet
trigger1 = time = 1
x = 0
y = 0

;---------------------------------------------------------------------------
; Throw 3 - Knee Press Nightmare (P2 - Ouch!)
[Statedef 693]
type = S
movetype = A
physics = S
ctrl = 0

[State 693, Ow!]
type = LifeAdd
trigger1 = Time = 0
value = 0

[State 693, 2]
type = ChangeAnim2
triggerall = P1name = "Ken-X" || (P1Name = "Ryu-X")
trigger1 = time = 0
value = 702

[State 693, 2]
type = ChangeAnim2
triggerall = P1name != "Ken-X" && (P1Name != "Ryu-X")
trigger1 = time = 0
value = 703

[State 693, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 694

;---------------------------------------------------------------------------
; Throw 3 - Knee Press Nightmare (P2 - Held in place [Sorry, no more tech hits])
[Statedef 694]
type = S
movetype = H
physics = S
ctrl = 0
velset = 0,0

[State 692, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 701

[State 692, 2]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

;---------------------------------------------------------------------------
; Ground Fireball_X
[Statedef 700]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0,0
anim = 710

[State 700, Hadoken!]
type = PlaySnd
trigger1 = Time = 2
volume = 100
value = S55,0

[State 700, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 700, Go Fireball!]
type = Helper
trigger1 = AnimElem = 5
helpertype = Normal
name = "Faiabaaaru!"
postype = p1
pos = 45,-18
stateno = 704
ID = 704
ownpal = 1
persistent = 0

[State 700, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 700, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 5
value = S8,2

[State 700, Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 5
value = S12,4

;---------------------------------------------------------------------------
; Ground Fireball_Y
[Statedef 701]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0,0
anim = 710

[State 701, Hadoken!]
type = PlaySnd
trigger1 = Time = 2
volume = 100
value = S55,0

[State 701, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 700, Go Fireball!]
type = Helper
trigger1 = AnimElem = 5
helpertype = Normal
name = "Faiabaaaru!"
postype = p1
pos = 45,-18
stateno = 707
ID = 704
ownpal = 1
persistent = 0

[State 701, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 701, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 5
value = S8,2

[State 700, Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 5
value = S12,4

;---------------------------------------------------------------------------
; Ground Fireball_Z
[Statedef 702]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0,0
anim = 710

[State 702, Hadoken!]
type = PlaySnd
trigger1 = Time = 2
volume = 100
value = S55,0

[State 702, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 700, Go Fireball!]
type = Helper
trigger1 = AnimElem = 5
helpertype = Normal
name = "Faiabaaaru!"
postype = p1
pos = 45,-18
stateno = 708
ID = 704
ownpal = 1
persistent = 0

[State 702, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 702, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 5
value = S8,2

[State 700, Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 5
value = S12,4

;---------------------------------------------------------------------------
; Fake - Gwaaaaa!!!!
[Statedef 703]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 712
velset = 7,0

[State 702, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 703, Hit the Ground]
type = VelSet
trigger1 = AnimElem = 3
x = 0

[State 703, Hit the Ground Sound!]
type = PlaySnd
trigger1 = AnimElem = 3
value = 15,0

[State 100, Dust!]
type = MakeDust
trigger1 = Time = [12,13]
trigger2 = Time = [14,15]
trigger3 = Time = [16,17]
pos = -10,-20
pos2 = -10,-10

[State 703, Fall up??]
type = VelSet
trigger1 = AnimElem = 7
x = -3
y = -3

[State 703, Fall!]
type = VelAdd
triggerall = Time > 39
trigger1 = 1
y = .39

[State 703, Land!]
type = ChangeState
triggerall = Time > 49
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Ground_Fireball X (Projectile Helper)
[Statedef 704]
type = S
physics = N
movetype = A
anim = 720
poweradd = 0
velset = 5,0
ctrl = 0

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Always on Top!]
type = Sprpriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 2051, Getting Hit Would Make for Bugs]
type = NotHitBy
trigger1 = 1
time = 99
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2051, All projectiles can hit you though]
type = HitBy
trigger1 = 1
time = 99
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, If Hit by..]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 705
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, Attacking!]
type = HitDef
trigger1 = EnemyNear, Anim != 5070
trigger1 = Time = 0
attr = S, SP
damage = 90,9
animtype = Hard
hitflag = MAF
guardflag = MA
getpower = 30,15
givepower = 15,8
pausetime = 0,5
sparkno = 3
sparkxy = 0,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 19
ground.hittime  = 23
ground.velocity = -8
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3

[State 706, Dust Trail] 
type = Explod
trigger1 = Time = 0
anim = 747
ID = 747
pos = 20,28
postype = p1
sprpriority = 5
bindtime = -1
removetime = -1
shadow = -1
ownpal = 1

[State 2051, Still Poweradds when it hits]
type = ParentVarSet
trigger1 = movehit && hitpausetime = 1
var(19) = 1

[State 2051, Still Poweradds when it blocks]
type = ParentVarSet
trigger1 = moveguarded && hitpausetime = 1
var(19) = 2

[State 2050, I hit!]
type = ChangeState
trigger1 = FrontEdgeBodyDist < -40
trigger2 = Movecontact
value = 705

[State 2050, I dissipated!]
type = ChangeState
trigger1 = Time = 10
value = 706
;---------------------------------------------------------------------------
; Ground_Fireball (All Projectiles Hit)
[Statedef 705]
type = S
physics = N
movetype = A
poweradd = 0
velset = 0,0
ctrl = 0

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Illusion] 
type = Explod
trigger1 = Time = 0
anim = 721
ID = 721
pos = 0,0
postype = p1
sprpriority = 2
bindtime = 1
removetime = -2
shadow = -1
ownpal = 1

[State 706, Dust Trail Dissipating] 
type = Explod
trigger1 = Time = 0
anim = 748
ID = 748
pos = 20,28
postype = p1
sprpriority = 5
bindtime = 1
removetime = -2
vel = 1,0
shadow = -1
ownpal = 1

[State 2050, I've no more NEED for you Explod!]
type = RemoveExplod
trigger1 = Time = 0
ID = 747

[State 2050, I've no more NEED for you.]
type = Destroyself
trigger1 = Time = 1

;---------------------------------------------------------------------------
; Ground_Fireball (All Projectiles Dissipate)
[Statedef 706]
type = S
physics = N
movetype = A
poweradd = 0
ctrl = 0

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Illusion] 
type = Explod
trigger1 = Time = 0
anim = 721
ID = 721
pos = 0,0
postype = p1
sprpriority = 2
bindtime = 1
vel = 2,0
removetime = -2
shadow = -1,0,0
ownpal = 1

[State 706, Dust Trail Dissipating] 
type = Explod
trigger1 = Time = 0
anim = 748
ID = 748
pos = 20,28
postype = p1
sprpriority = 5
bindtime = 1
removetime = -2
vel = 1,0
shadow = -1
ownpal = 1

[State 2050, I've no more NEED for you Explod!]
type = RemoveExplod
trigger1 = Time = 0
ID = 747

[State 2050, I've no more NEED for you.]
type = Destroyself
trigger1 = Time = 1

;---------------------------------------------------------------------------
; Ground_Fireball Y (Projectile Helper)
[Statedef 707]
type = S
physics = N
movetype = A
anim = 720
poweradd = 0
velset = 5,0
ctrl = 0

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Always on Top!]
type = Sprpriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 2051, Getting Hit Would Make for Bugs]
type = NotHitBy
trigger1 = 1
time = 99
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2051, All projectiles can hit you though]
type = HitBy
trigger1 = 1
time = 99
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, If Hit by..]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 705
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, Attacking!]
type = HitDef
trigger1 = EnemyNear, Anim != 5070
trigger1 = Time = 0
attr = S, SP
damage = 80,6
animtype = Hard
hitflag = MAF
guardflag = MA
pausetime = 0,5
getpower = 30,15
givepower = 30;15,8
sparkxy = 0,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 19
ground.hittime  = 23
ground.velocity = -8
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3

[State 706, Dust Trail] 
type = Explod
trigger1 = Time = 0
anim = 747
ID = 747
pos = 20,28
postype = p1
sprpriority = 5
bindtime = -1
removetime = -1
shadow = -1
ownpal = 1

[State 2051, Still Poweradds when it hits]
type = ParentVarSet
trigger1 = movehit && hitpausetime = 1
var(19) = 1
ignorehitpause = 1

[State 2051, Still Poweradds when it blocks]
type = ParentVarSet
trigger1 = moveguarded && hitpausetime = 1
var(19) = 2
ignorehitpause = 1

[State 2050, I hit!]
type = ChangeState
trigger1 = FrontEdgeBodyDist < -40
trigger2 = Movecontact
value = 705

[State 2050, I dissipated!]
type = ChangeState
trigger1 = Time = 14
value = 706

;---------------------------------------------------------------------------
; Ground_Fireball Z (Projectile Helper)
[Statedef 708]
type = S
physics = N
movetype = A
anim = 720
poweradd = 0
velset = 5,0
ctrl = 0

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Always on Top!]
type = Sprpriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 2051, Getting Hit Would Make for Bugs]
type = NotHitBy
trigger1 = 1
time = 99
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2051, All projectiles can hit you though]
type = HitBy
trigger1 = 1
time = 99
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, If Hit by..]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 705
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, Attacking!]
type = HitDef
trigger1 = EnemyNear, Anim != 5070
trigger1 = Time = 0
attr = S, SP
damage    = 48,3
animtype = Hard
hitflag = MAF
guardflag = MA
pausetime = 0,5
sparkno = 3
sparkxy = 0,-57
getpower = 30,15
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 19
ground.hittime  = 23
ground.velocity = -8
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3

[State 2051, Still Poweradds when it hits]
type = ParentVarSet
trigger1 = movehit && hitpausetime = 1
var(19) = 1
ignorehitpause = 1

[State 2051, Still Poweradds when it blocks]
type = ParentVarSet
trigger1 = moveguarded && hitpausetime = 1
var(19) = 2
ignorehitpause = 1

[State 706, Dust Trail] 
type = Explod
trigger1 = Time = 0
anim = 747
ID = 747
pos = 20,28
postype = p1
sprpriority = 5
bindtime = -1
removetime = -1
shadow = -1
ownpal = 1

[State 2050, I hit!]
type = ChangeState
trigger1 = FrontEdgeBodyDist < -40
trigger2 = Movecontact
value = 705

[State 2050, I dissipated!]
type = ChangeState
trigger1 = Time = 23
value = 706

;---------------------------------------------------------------------------
; Air Fireball_X
[Statedef 710]
type    = A
movetype= A
physics = N
poweradd= 70
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = 711

[State 710, Hadoken!]
type = PlaySnd
trigger1 = Time = 2
volume = 100
value = S11,2

[State 710, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 700, Go Fireball!]
type = Helper
trigger1 = AnimElem = 3
helpertype = Normal
name = "Faiabaaaru!"
postype = p1
pos = 45,-18
stateno = 713
ID = 705
ownpal = 1
persistent = 0

[State 710, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 710, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,2

[State 700, Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 3
value = S12,4

;---------------------------------------------------------------------------
; Air Fireball_Y
[Statedef 711]
type    = A
movetype= A
physics = N
poweradd= 70
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = 711

[State 711, Hadoken!]
type = PlaySnd
trigger1 = Time = 2
volume = 100
value = S11,3

[State 711, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 700, Go Fireball!]
type = Helper
trigger1 = AnimElem = 3
helpertype = Normal
name = "Faiabaaaru!"
postype = p1
pos = 45,-18
stateno = 716
ID = 705
ownpal = 1
persistent = 0

[State 711, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 711, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,2

[State 700, Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 3
value = S12,4

;---------------------------------------------------------------------------
; Air Fireball_Z
[Statedef 712]
type    = A
movetype= A
physics = N
poweradd= 70
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = 711

[State 712, Hadoken!]
type = PlaySnd
trigger1 = Time = 2
volume = 100
value = S11,4

[State 712, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 700, Go Fireball!]
type = Helper
trigger1 = AnimElem = 3
helpertype = Normal
name = "Faiabaaaru!"
postype = p1
pos = 45,-18
stateno = 717
ID = 705
ownpal = 1
persistent = 0

[State 712, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 712, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,2

[State 700, Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 3
value = S12,4

;---------------------------------------------------------------------------
; Air Fireball X (Projectile Helper)
[Statedef 713]
type = S
physics = N
movetype = A
anim = 723
poweradd = 0
velset = 5,2.5
ctrl = 0

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Always on Top!]
type = Sprpriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 2051, Getting Hit Would Make for Bugs]
type = NotHitBy
trigger1 = 1
time = 99
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2051, All projectiles can hit you though]
type = HitBy
trigger1 = 1
time = 99
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, If Hit by..]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 705
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, Attacking!]
type = HitDef
trigger1 = EnemyNear, Anim != 5070
trigger1 = Time = 0
attr = S, SP
damage    = 78,9
animtype = Hard
hitflag = MAF
guardflag = MA
pausetime = 0,5
sparkno = 3
getpower = 30,15
givepower = 15,8
sparkxy = 20,-29
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
ground.slidetime = 19
ground.hittime  = 23
ground.velocity = -8
air.animtype = Back
air.velocity = -10,0
air.juggle = 3
air.fall = 1
fall.recover = 0

[State 2051, Still Poweradds when it hits]
type = ParentVarSet
trigger1 = movehit && hitpausetime = 1
var(19) = 1

[State 2051, Still Poweradds when it blocks]
type = ParentVarSet
trigger1 = moveguarded && hitpausetime = 1
var(19) = 2

[State 620, Aerial RAVE!]
type = ParentVarset
trigger1 = movehit && (parent, prevstateno = [600,641])
var(10) = 1

[State 2050, I hit!]
type = ChangeState
trigger1 = FrontEdgeBodyDist < -40
trigger2 = Movecontact
value = 714

[State 2050, I dissipated!]
type = ChangeState
trigger1 = Time = 10|| Pos Y >= 30
value = 715

;---------------------------------------------------------------------------
; Air Fireball (All Projectiles Hit)
[Statedef 714]
type = S
physics = N
movetype = A
poweradd = 0
velset = 0,0
ctrl = 0

[State 2051, Illusion] 
type = Explod
trigger1 = Time = 0
anim = 724
ID = 724
pos = 0,0
postype = p1
sprpriority = 2
bindtime = 1
removetime = -2
shadow = -1,0,0
ownpal = 1

[State 2050, I've no more NEED for you.]
type = Destroyself
trigger1 = Time = 1

;---------------------------------------------------------------------------
; Air Fireball (All Projectiles Dissipate)
[Statedef 715]
type = S
physics = N
movetype = A
poweradd = 0
ctrl = 0

[State 2051, Illusion] 
type = Explod
trigger1 = Time = 0
anim = 724
ID = 724
pos = 0,0
postype = p1
sprpriority = 2
bindtime = 1
vel = 2,1
removetime = -2
shadow = -1,0,0
ownpal = 1

[State 2050, I've no more NEED for you.]
type = Destroyself
trigger1 = Time = 1

;---------------------------------------------------------------------------
; Air Fireball Y (Projectile Helper)
[Statedef 716]
type = S
physics = N
movetype = A
anim = 723
poweradd = 0
velset = 5,2.5
ctrl = 0

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Always on Top!]
type = Sprpriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 2051, Getting Hit Would Make for Bugs]
type = NotHitBy
trigger1 = 1
time = 99
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2051, All projectiles can hit you though]
type = HitBy
trigger1 = 1
time = 99
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, If Hit by..]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 705
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, Attacking!]
type = HitDef
trigger1 = EnemyNear, Anim != 5070
trigger1 = Time = 0
attr = S, SP
damage    = 61,6
animtype = Hard
hitflag = MAF
guardflag = MA
pausetime = 0,5
sparkno = 3
sparkxy = 20,-29
hitsound   = S1,3
guardsound = S1,0
getpower = 30,15
givepower = 15,8
ground.type = Low
ground.slidetime = 19
ground.hittime  = 23
ground.velocity = -8
air.animtype = Back
air.velocity = -10,0
air.juggle = 3
air.fall = 1
fall.recover = 0

[State 2051, Still Poweradds when it hits]
type = ParentVarSet
trigger1 = movehit && hitpausetime = 1
var(19) = 1

[State 2051, Still Poweradds when it blocks]
type = ParentVarSet
trigger1 = moveguarded && hitpausetime = 1
var(19) = 2

[State 620, Aerial RAVE!]
type = ParentVarset
trigger1 = movehit && (parent, prevstateno = [600,641])
var(10) = 1

[State 2050, I hit!]
type = ChangeState
trigger1 = FrontEdgeBodyDist < -40
trigger2 = Movecontact
value = 714

[State 2050, I dissipated!]
type = ChangeState
trigger1 = Time = 14 || Pos Y >= 30
value = 715

;---------------------------------------------------------------------------
; Air Fireball Z (Projectile Helper)
[Statedef 717]
type = S
physics = N
movetype = A
anim = 723
poweradd = 0
velset = 5,2.5
ctrl = 0

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Always on Top!]
type = Sprpriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 2051, Getting Hit Would Make for Bugs]
type = NotHitBy
trigger1 = 1
time = 99
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 2051, All projectiles can hit you though]
type = HitBy
trigger1 = 1
time = 99
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, If Hit by..]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 705
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 2051, Attacking!]
type = HitDef
trigger1 = EnemyNear, Anim != 5070
trigger1 = Time = 0
attr = S, SP
damage    = 48,3
animtype = Hard
hitflag = MAF
guardflag = MA
pausetime = 0,5
sparkno = 3
getpower = 30,15
givepower = 15,8
sparkxy = 20,-29
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
ground.slidetime = 19
ground.hittime  = 23
ground.velocity = -8
air.animtype = Back
air.velocity = -10,0
air.juggle = 3
air.fall = 1
fall.yvelocity = -.2
fall.recover = 0

[State 2051, Still Poweradds when it hits]
type = ParentVarSet
trigger1 = movehit && hitpausetime = 1
var(19) = 1

[State 2051, Still Poweradds when it blocks]
type = ParentVarSet
trigger1 = moveguarded && hitpausetime = 1
var(19) = 2

[State 620, Aerial RAVE!]
type = ParentVarset
trigger1 = movehit && (parent, prevstateno = [600,641])
var(10) = 1

[State 2050, I hit!]
type = ChangeState
trigger1 = FrontEdgeBodyDist < -40
trigger2 = Movecontact
value = 714

[State 2050, I dissipated!]
type = ChangeState
trigger1 = Time = 22 || Pos Y >= 30
value = 715

;---------------------------------------------------------------------------
; Dragon Punch_X - (Normal Dragon Punch)
[Statedef 720]
type = S
movetype = A
physics = N
anim = Ifelse(Pos Y = 0, 750, 754)
poweradd = 70
velset = 0
ctrl = 0
juggle = 4

[State 720, Dust]
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(770) = 0
anim = 770
id = 770
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 770

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 3 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 720, VelSTOP]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 720, Sho-ryuken!]
type = PlaySnd
trigger1 = Time = 1
volume = 100
value = S10000,1

[State 720, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 3
attr = C, SA
damage    = 102,4
animtype  = Back
getpower  = 10
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 2
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15,-12
air.velocity = -15,-12
ground.cornerpush.veloff = -14
yaccel = .32
p2facing = 1
p2stateno = 725
fall.yvelocity = -.2
fall.recovertime = 38
fall = 1
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = -10.5
air.cornerpush.veloff = -8.5

;[State 720, Whoosh!]
;type = PlaySnd
;trigger1 = AnimElem = 3
;value = S20,3

[State 731, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 620, Flare Whoosh!]
type = PlaySnd
trigger1 = movehit && Hitpausetime = 2
value = S20,2
ignorehitpause = 1

[State 620, Aerial RAVE!]
type = Varset
trigger1 = movehit && prevstateno = [600,641]
var(10) = 1

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 720, Rise!]
type = ChangeState
trigger1 = AnimTime = 0 && movecontact
value = 721

[State 720, No movecontact?]
type = ChangeState
trigger1 = AnimTime = 0 && !movecontact
value = 724

;---------------------------------------------------------------------------
; Normal Dragon Punch (Rising) [movehit]
[Statedef 721]
type = A
movetype = A
physics = A
ctrl = 0
anim = 751
velset = 4,-6

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(771) = 0
anim = 771
id = 771
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 620, Flare Whoosh!]
type = PlaySnd
trigger1 = movehit && Hitpausetime = 2
value = S20,2
ignorehitpause = 1

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 722

;---------------------------------------------------------------------------
; Normal Dragon Punch (Falling)
[Statedef 722]
type = A
movetype = I
physics = N
anim = 752
ctrl = 0
velset = 0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(772) = 0
anim = 772
id = 772
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -2
removeongethit = 1
bind = p1

[State 722, Gravity]
type = VelAdd
trigger1 = Time != 1000
y = .50

[State 722, Land now!]
type = ChangeState
trigger1 = pos y >= 0
value = 723

;---------------------------------------------------------------------------
; Normal Dragon Punch (Landing)
[Statedef 723]
type = S
movetype = I
physics = S
anim = 753
ctrl = 0
velset = 0,0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -75,-10
postype = p1
sprpriority = -1
bindtime = 1

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Normal Dragon Punch (Rising) [No Movehit]
[Statedef 724]
type = A
movetype = A
physics = A
ctrl = 0
anim = 751
velset = 4,-6
juggle = 5

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(771) = 0
anim = 771
id = 771
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1


[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 1
attr = A, SA
damage    = 122,4
animtype  = Back
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 4
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -14,-14.5
air.velocity = -14,-14.5
yaccel = .5
p2facing = 1
p2stateno = 725
fall.yvelocity = -.2
fall.recovertime = 32
fall = 1

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 722

;---------------------------------------------------------------------------
; Dragon Punch HITA_SHAKE
[Statedef 725]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 726

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; Dragon Punch HITA_UP (initial going up)
[Statedef 726]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5035, 1]
type = ChangeAnim
triggerall = (Vel X = 0) && (PrevStateno != 5080)
trigger1 = Time = 7
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = Hitfall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 728 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 727 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; Dragon Punch HITA_UP_T (transition)
[Statedef 727]
type    = A
movetype= H
physics = N

[State 1231, Wall hit spark!]
type = Explod
trigger1 = BackEdgeDist <= 18 && !Time
anim = F72
ontop = 1
postype = p1
pos = (BackEdgeDist - 10),-60
pausemovetime = 9999999999999999999999
supermovetime = 9999999999999999999999

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0 && (Var(5) = 0)
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 728 ;HITA_FALL

;---------------------------------------------------------------------------
; Dragon Punch HITA_FALL (knocked up, falling)
[Statedef 728]
type    = A
movetype= H
physics = N

[State 1231, Wall hit spark!]
type = Explod
trigger1 = !Time && BackEdgeDist <= 18
anim = F72
ontop = 1
postype = p1
pos = (BackEdgeDist - 10),-60
pausemovetime = 9999999999999999999999
supermovetime = 9999999999999999999999

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -4.5)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, Sunboy's Auto Recover...]
type = SelfState
triggerall = alive
triggerall = Pos Y < 0
trigger1 = CanRecover
value = 5040

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; Dragon Punch_Y - (Red Dragon Punch)
; Dragon Punch_Z - (Flaming Dragon Punch)
[Statedef 730]
type = S
movetype = A
Physics = N
anim = Ifelse(Pos Y = 0, 750, 754)
poweradd = 70
velset = 0
ctrl = 0
juggle = 4

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(770) = 0
anim = 770
id = 770
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 770

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 3 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 730, Sho-ryuken!]
type = PlaySnd
trigger1 = Time = 1
volume = 100
value = S10000,1

[State 730, Dust]
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 730, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 730, 2]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
attr = S, SA
damage    = 40,6
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 13,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -2,-7
air.velocity = -2,-7
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = -10.5
air.cornerpush.veloff = -8.5

;[State 730, 2]
;type = HitDef
;trigger1 = enemyNear, Anim != 5070
;trigger1 = AnimElem = 3
;attr = S, SA
;damage    = 45,6
;animtype  = Hard
;getpower  = 10
;givepower = 8
;hitflag = MAf
;guardflag = MA
;pausetime = 14,9
;sparkno = 3
;sparkxy = -15,-59
;hitsound   = S1,3
;guardsound = S1,0
;ground.type = Low
;air.juggle = 2
;ground.slidetime = 4
;ground.hittime  = 15
;ground.velocity = -3,-10
;air.velocity = -3,-10
;palfx.time = 50
;palfx.add = 235,60,0
;palfx.sinadd = 235,60,0,5
;ground.cornerpush.veloff = -10.5
;air.cornerpush.veloff = -8.5

[State 620, Flare Whoosh!]
type = PlaySnd
trigger1 = movehit && Hitpausetime = 2
value = S20,2
ignorehitpause = 1

[State 620, Aerial RAVE!]
type = Varset
trigger1 = movehit && prevstateno = [600,641]
var(10) = 1

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 730, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 731

;---------------------------------------------------------------------------
; Flaming Dragon Punch (Rising)
[Statedef 731]
type = A
movetype = A
physics = A
anim = 765
ctrl = 0
velset = 6,-8.5

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(771) = 0
anim = 771
id = 771
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 731, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 731, 0]
type = VelAdd
trigger1 = Time != 1 ;&& Vel X > 0
x = -.2

[State 731, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = Time = 0
attr = A, SA
damage    = 58,6
animtype  = Back
getpower  = IfElse(PrevStateno = 830, 0, 10)
givepower = IfElse(PrevStateno = 830, 10, 8)
hitflag = MAF
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
air.juggle = 4
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15,-18.5
air.velocity = -15,-18.5
ground.cornerpush.veloff = 0
yaccel = .5
p2stateno = 725
fall.recovertime = 32
fall = 1
fall.yvelocity = -.2
p2facing = 1
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5

[State 620, Flare Whoosh!]
type = PlaySnd
trigger1 = movehit && Hitpausetime = 2
value = S20,2
ignorehitpause = 1

[State 731, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 732

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Flaming Dragon Punch (Falling)
[Statedef 732]
type = A
movetype = I
physics = N
anim = 752
ctrl = 0
velset = 0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(772) = 0
anim = 772
id = 772
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -2
removeongethit = 1
bind = p1

[State 732, Gravity]
type = VelAdd
trigger1 = time != 1000
y = .50

[State 732, Land (Normal DP Land state)]
type = ChangeState
trigger1 = pos Y >= 0
value = 723



;---------------------------------------------------------------------------
; Dragon Punch_Z - (Flaming Dragon Punch)
[Statedef 740]
type = S
movetype = A
Physics = N
anim = Ifelse(Pos Y = 0, 750, 754)
poweradd = 70
velset = 0
ctrl = 0
juggle = 4

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(770) = 0
anim = 770
id = 770
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 770

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 3 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 730, Sho-ryuken!]
type = PlaySnd
trigger1 = Time = 1
volume = 100
value = S10000,1

[State 740, Dust] 
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 740, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 740, 2]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
attr = S, SA
damage    = 45,6
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 13,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -2,-7
air.velocity = -2,-7
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = -10.5
air.cornerpush.veloff = -8.5

[State 740, 2]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 3
attr = S, SA
damage    = 45,6
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 14,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -3,-10
air.velocity = -3,-10
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = -10.5
air.cornerpush.veloff = -8.5

[State 620, Flare Whoosh!]
type = PlaySnd
trigger1 = movehit && Hitpausetime = 2
value = S20,2
ignorehitpause = 1

[State 620, Aerial RAVE!]
type = Varset
trigger1 = movehit && prevstateno = [600,641]
var(10) = 1

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 741

;---------------------------------------------------------------------------
; Flaming Dragon Punch (Rising)
[Statedef 741]
type = A
movetype = A
physics = A
anim = 751
ctrl = 0
velset = 7,-11

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(771) = 0
anim = 771
id = 771
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 741, 0]
type = VelAdd
trigger1 = Time != 1 && Vel X > 0
x = -.2

[State 741, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = Time = 0
attr = A, SA
damage    = 58,6
animtype  = Back
getpower  = IfElse(PrevStateno = 830, 0, 10)
givepower = IfElse(PrevStateno = 830, 10, 8)
hitflag = MAF
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
air.juggle = 4
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15,-18.5
air.velocity = -15,-18.5
ground.cornerpush.veloff = 0
yaccel = .5
p2stateno = 725
fall.recovertime = 32
fall = 1
fall.yvelocity = -.2
p2facing = 1
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5

[State 620, Flare Whoosh!]
type = PlaySnd
trigger1 = movehit && Hitpausetime = 2
value = S20,2
ignorehitpause = 1

[State 741, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 742

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Flaming Dragon Punch (Falling)
[Statedef 742] 
type = A
movetype = I
physics = N
anim = 752
ctrl = 0
velset = 0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(772) = 0
anim = 772
id = 772
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -2
removeongethit = 1
bind = p1

[State 742, Gravity]
type = VelAdd
trigger1 = time != 1000
y = .50

[State 742, Land (Normal DP Land state)]
type = ChangeState
trigger1 = pos Y >= 0
value = 723

;---------------------------------------------------------------------------
; Hurricane Kick A
[Statedef 750]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 783
juggle = 1

[State 750, Up we go.]
type = VelSet
trigger1 = time != 1
x = 6
y = -2  

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 1100, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElemTime(1) = 2
attr = S, SA
animtype  = High
damage    = 20,3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 20
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6,-4
air.velocity = -6,-4

[State 1100, 1]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
attr = A, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 20
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6,-4
air.velocity = -6,-4

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
value = S6,3


[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
volume = 100
value = S10000,2

[State 750, I hit him!  I did!]
type = ChangeState
trigger1 = (AnimTime = 0) && (MoveContact)
value = 780

[State 750, I missed him]
type = ChangeState
trigger1 = (AnimTime = 0) && (!MoveContact)
value = 781

;---------------------------------------------------------------------------
; Air Hurricane Kick A
[Statedef 751]
type = A
movetype = A
physics = A
poweradd = 70
ctrl = 0
anim = 780
juggle = 4

[State 751, Go!]
type = VelAdd
trigger1 = Time = 0
x = ifelse(Vel X < 0, -.75, .75)
y = -2.5

[State 751, 1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 5
attr = A, SA
animtype  = Low
damage    = 40, 9
guardflag = MA
pausetime = 10,10
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3
air.velocity = -4,-5

[State 751, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
value = S6,3

[State 751, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
volume = 150
value = S10000,3

[State 751, Let's Move On]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
; Hurricane Kick (Landing in general)
[Statedef 752]
type = S
movetype = I
physics = S
anim = 670
ctrl = 0
velset = 0,0

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -75,-10
postype = p1
sprpriority = -1
bindtime = 1

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hurricane Kick B
[Statedef 760]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 783
juggle = 1

[State 750, Up we go.]
type = VelSet
trigger1 = time != 1
x = 5.5
y = -2.5 

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 1100, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElemTime(1) = 2
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5,-4.5
air.velocity = -5.5,-4.5

[State 1100, 1]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
attr = A, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5,-4.5
air.velocity = -5.5,-4.5

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
volume = 100
value = S10000,2

[State 750, I hit him!  I did!]
type = ChangeState
trigger1 = (AnimTime = 0) && (MoveContact)
value = 780

[State 750, I missed him]
type = ChangeState
trigger1 = (AnimTime = 0) && (!MoveContact)
value = 781

;---------------------------------------------------------------------------
; Air Hurricane Kick B
[Statedef 761]
type = A
movetype = A
physics = A
poweradd = 70
ctrl = 0
anim = 781
juggle = 4

[State 751, Go!]
type = VelAdd
trigger1 = Time = 0
x = ifelse(Vel X < 0, -.75, .75)
y = -2.5

[State 751, 1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 7
trigger4 = animelem = 9
attr = A, SA
animtype  = Low
damage    = 50, 6
guardflag = MA
pausetime = 10,10
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3
air.velocity = -4,-5

[State 751, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 7
value = S6,3


[State 751, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
volume = 150
value = S10000,3

[State 751, Let's Move On]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
; Hurricane Kick C
[Statedef 770]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 783
juggle = 1

[State 750, Up we go.]
type = VelSet
trigger1 = time != 1
x = 6 
y = -3

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 1100, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElemTime(1) = 2
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6,-6
air.velocity = -6,-5

[State 1100, 1]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
attr = A, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6,-5
air.velocity = -6,-5

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
value = S6,3

[State 751, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
volume = 100
value = S10000,2

[State 750, I hit him!  I did!]
type = ChangeState
trigger1 = (AnimTime = 0) && (MoveContact)
value = 780

[State 750, I missed him]
type = ChangeState
trigger1 = (AnimTime = 0) && (!MoveContact)
value = 781

;---------------------------------------------------------------------------
; Air Hurricane Kick C
[Statedef 771]
type = A
movetype = A
physics = A
poweradd = 70
ctrl = 0
anim = 782
juggle = 4

[State 751, Go!]
type = VelAdd
trigger1 = Time = 0
x = ifelse(Vel X < 0, -.75, .75)
y = -2.5

[State 751, 1]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 7
trigger4 = animelem = 9
trigger5 = animelem = 11
trigger6 = animelem = 13
attr = A, SA
animtype  = Low
damage    = 20, 3
guardflag = MA
pausetime = 10,10
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3
air.velocity = -4,-5

[State 751, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 7
trigger3 = animelem = 11
value = S6,3

[State 751, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
volume = 150
value = S10000,3

[State 751, Let's Move On]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
;Hurricane Kick Down
[Statedef 780]
Type = A
Movetype = A
Physics = S
velset = 0,0
Anim = 784

[State 780, 1]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = High
damage    = 40,9
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-1
air.velocity = -7,-1
fall.recover = 0
fall = 1
fall.yvelocity = -.2
ground.cornerpush.veloff = -14
air.cornerpush.veloff = -14
down.cornerpush.veloff = 0

[State 780, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 781

;---------------------------------------------------------------------------
;Hurricane Kick Down (no move contact)
[Statedef 781]
Type = A
Movetype = A
Physics = A
Anim = 785

[State 1110, 6]
type = PlayerPush
triggerall = PrevStateno = 840
trigger1 = 1
value = 0

[State 785, No Moving Forward]
type = VelSet
trigger1 = Time = 0
x = 0
y = 1

;---------------------------------------------------------------------------
; Shoryureppa! (Begin)
[Statedef 790]
type = S
movetype = A
Physics = N
anim = 803
velset = 0,0
ctrl = 0
juggle = 0

[State 740, Ikuze!]
type = PlaySnd
trigger1 = Time = 1
value = S4,0

[State 790, Sho-Ryu Reppa!]
type = PlaySnd
trigger1 = Time = 4
value = S13,0
channel = 1

[State 620, Bye Flames! 1]
type = RemoveExplod
trigger1 = Time = 0
id = 770

[State 620, Bye Flames! 2]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 620, Bye Flames! 3]
type = RemoveExplod
trigger1 = Time = 0
id = 772

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(774) = 0
anim = 774
id = 774
pos = 0,0
postype = p1
bindtime = -1
supermove = 1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 2
id = 774

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 2 && NumExplod(775) = 0
anim = 775
id = 775
pos = 0,0
postype = p1
bindtime = -1
supermove = 1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 775

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 3 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
superpause = 0
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 4
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 0)
anim = 792
id = 792
bindtime = 900
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
scale = 1.08,1.08
sprpriority = -5

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 1
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 1
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 1
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 1
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 1
pos = 35,35
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.1

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 2100, 1]
type = VelSet
triggerall = Time >= 4
trigger1 = 1
x = 7
ignorehitpause = 1

[State 740, Temporary Invincibility]
type = Nothitby
trigger1 = Time >= 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
attr = S, HA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAFD
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -6,-4
down.velocity = -5,-7
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 791

;---------------------------------------------------------------------------
; Shoryureppa (Part 1 - Rise)
[Statedef 791]
type = S
movetype = A
physics = S
anim = 801
ctrl = 0
velset = 7, 0
juggle = 5

[State 2100, 1]
type = VelSet
trigger1 = 1
x = 7
ignorehitpause = 1

[State 740, Temporary Invincibility]
type = Nothitby
trigger1 = 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(771) = 0
anim = 771
id = 771
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, HA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 741, To Falling State]
type = ChangeState
trigger1 = AnimTime = 0
value = 792

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Shoryureppa (Part 1 - Fall)
[Statedef 792] 
type = A
movetype = I
physics = S
anim = 802
ctrl = 0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(772) = 0
anim = 772
id = 772
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -2
removeongethit = 1
bind = p1

[State 740, Temporary Invincibility]
type = Nothitby
trigger1 = AnimElem = 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 742, Land (Shoryureppa part 2)]
type = ChangeState
trigger1 = AnimTime = 0
value = 793

;---------------------------------------------------------------------------
; Shoryureppa! (Part 2)
[Statedef 793]
type = S
movetype = A
Physics = N
anim = 800
velset = 7,0
ctrl = 0
juggle = 0

[State 730, The all-consuming flames]
type = Explod
trigger1 = Animelem = 2 && NumExplod(770) = 0
anim = 770
id = 770
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 4
id = 770

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 4 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 2100, 1]
type = VelSet
trigger1 = 1
x = 7

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
attr = S, HA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 794

;---------------------------------------------------------------------------
; Shoryureppa (Part 2 - Rise)
[Statedef 794]
type = S
movetype = A
physics = S
anim = 801
ctrl = 0
velset = 7, 0
juggle = 5

[State 2100, 1]
type = VelSet
trigger1 = 1
x = 7
ignorehitpause = 1

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(771) = 0
anim = 771
id = 771
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, HA
damage    = 31,4
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 741, To Falling State]
type = ChangeState
trigger1 = AnimTime = 0
value = 795

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Shoryureppa (Part 2 - Fall)
[Statedef 795] 
type = A
movetype = I
physics = s
anim = 802
ctrl = 0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(772) = 0
anim = 772
id = 772
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -2
removeongethit = 1
bind = p1

[State 742, Land (Shoryureppa part 3)]
type = ChangeState
trigger1 = AnimTime = 0
value = 796

;---------------------------------------------------------------------------
; Shoryureppa! (Part 3)
[Statedef 796]
type = S
movetype = A
Physics = N
anim = 800
velset = 7,0
ctrl = 0
juggle = 0

[State 2100, 1]
type = VelSet
trigger1 = animelem = 1
x = 7

[State 730, The all-consuming flames]
type = Explod
trigger1 = Animelem = 2 && NumExplod(770) = 0
anim = 770
id = 770
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 4
id = 770

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 4 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 740, 2]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 3
attr = S, HA
damage    = 32,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -8,0
air.velocity = -3,0
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5

[State 741, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 4
attr = A, HA
damage    = 55,4
animtype  = Back
getpower  = 0
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 4
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -7,-14.5
air.velocity = -7,-14.5
fall.yvelocity = -.2
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5

[State 620, Flare Whoosh!]
type = PlaySnd
trigger1 = AnimElemTime(4) >= 0 && movehit && Hitpausetime = 2
value = S20,2
ignorehitpause = 1

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 797

;---------------------------------------------------------------------------
; Shoryureppa (Part 3 - Actually Rising!)
[Statedef 797]
type = A
movetype = A
physics = A
anim = 801
ctrl = 0
velset = 7,-11;8,-9
juggle = 5

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(771) = 0
anim = 771
id = 771
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 741, 0]
type = VelAdd
trigger1 = Time > 1 && Vel X > 0
x = -.4

[State 741, Let's Button Mashing!]
type = HitDef
triggerall = TimeMod = 1,0 && HitCount <= 7
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
trigger4 = command = "a"
trigger5 = command = "b"
trigger6 = command = "c"
attr = A, HA
damage    = 5,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 7,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -7,-12
air.velocity = -7,-12
fall.yvelocity = -.2
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5

[State 741, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 798

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Shoryureppa (Final part)
[Statedef 798] 
type = A
movetype = I
physics = N
anim = 752
ctrl = 0
velset = 0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(772) = 0
anim = 772
id = 772
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -2
removeongethit = 1
bind = p1

[State 742, Gravity]
type = VelAdd
trigger1 = time != 1000
y = .39

[State 742, Land (Normal DP Land state)]
type = ChangeState
trigger1 = pos Y >= 0
value = 723

;---------------------------------------------------------------------------
; Shinryuken! (Begin)
[Statedef 800]
type = S
movetype = A
Physics = N
anim = 810
velset = 0,0
ctrl = 0
juggle = 0

[State 620, Bye Flames! 0]
type = RemoveExplod
trigger1 = Time = 0
id = 760

[State 620, Bye Flames! 1]
type = RemoveExplod
trigger1 = Time = 0
id = 770

[State 620, Bye Flames! 2]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 620, Bye Flames! 3]
type = RemoveExplod
trigger1 = Time = 0
id = 772

[State 620, Bye Flames! 4]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 620, Bye Flames! 5]
type = RemoveExplod
trigger1 = Time = 0
id = 774

[State 620, Bye Flames! 6]
type = RemoveExplod
trigger1 = Time = 0
id = 775

[State 740, Kuraie!]
type = PlaySnd
trigger1 = Time = 5
volume = 100
value = S12000,0

[State 790, Shinryuken!]
type = PlaySnd
trigger1 = Time = 15
volume = 100
value = S12000,1

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 9)
anim = 792
id = 792
bindtime = 900
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
scale = 1.08,1.08
[State 790, Super Pause BG]
sprpriority = -5

type = Explod
trigger1 = time = 9
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 9
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 9
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 9
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 9
pos = 35,35
anim = S793
time = 34
poweradd = -1000

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
attr = S, HA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = 0,-13
air.velocity = 0,-13
down.bounce = 0
palfx.time = 50
palfx.add = 0,-200,0
palfx.sinadd = 40,80,40,10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 730, The all-consuming flames]
type = Explod
trigger1 = Animelem = 5 && NumExplod(770) = 0
anim = 770
id = 770
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 7
id = 770

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 7 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 801

;---------------------------------------------------------------------------
; Shinryuken (Up, up and away!)
[Statedef 801]
type = A
movetype = A
physics = N
anim = 811
ctrl = 0
velset = 0,-12

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(771) = 0
anim = 771
id = 771
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Animelem = 2
id = 771

;[State 731, Pillar!]
;type = EXPLOD
;trigger1 = (Time = 0) && (numexplod(812) = 0)
;anim = 812
;id = 812
;pos = 0,0
;postype = p1
;sprpriority = 0
;removetime = -1
;bindtime = 1

[State 741, Lizard Snake-like noise]
type = Playsnd
trigger1 = Time = 0
value = S9,5

[State 741, 3]
type = VelAdd
trigger1 = 1
y = .23

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5 
trigger4 = AnimElem = 7
trigger5 = AnimElem = 6
attr = S, HA
damage    = 23,6
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 4,4
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = 0,-7
air.velocity = 0,-7
fall.xvelocity = 0
fall.yvelocity = -.2
fall = 1
fall.recover = 0
down.bounce = 0
palfx.time = 50
palfx.add = 235,60,0 && palno <= 6
palfx.sinadd = 235,60,0,5 && palno <= 6
palfx.add = 0,-200,0 && palno >= 7;235,60,0
palfx.sinadd = 40,80,40,10 && palno >= 7;235,60,0,5
fall.envshake.time = 30
fall.envshake.freq = 180
fall.envshake.ampl = 3
fall.envshake.phase = 90
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 740, 2]
type = HitDef
triggerall = Time > 30
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
attr = S, HA
damage    = 5,1
animtype  = Hard
hitflag = MAf
guardflag = MA
pausetime = 0,0
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = 0,-6
air.velocity = 0,-6
fall.xvelocity = 0
fall.yvelocity = -.2
fall = 1
fall.recover = 0
palfx.time = 50
down.bounce = 0
palfx.add = 0,-200,0
palfx.sinadd = 40,80,40,10
fall.envshake.time = 30
fall.envshake.freq = 180
fall.envshake.ampl = 3
fall.envshake.phase = 90
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 741, To Falling State]
type = ChangeState
trigger1 = Vel Y >= 0
value = 802

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Shinryuken (Hovering)
[Statedef 802]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,.1

[State 740, 2]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 4
attr = S, HA
damage    = 50,6
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 3,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -12,-8
air.velocity = -12,-8
fall = 1
fall.recover = 0
down.bounce = 0
fall.xvelocity = 0
fall.yvelocity = -2
palfx.time = 50
palfx.add = 0,-200,0
palfx.sinadd = 40,80,40,10
fall.envshake.time = 30
fall.envshake.freq = 180
fall.envshake.ampl = 3
fall.envshake.phase = 90
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 741, To Falling State]
type = ChangeState
trigger1 = Time = 5
value = 803

;[State 731, Pillar!  GO AWAY!]
;type = EXPLOD
;trigger1 = (Time = 4) && (numexplod(813) = 0)
;anim = 813
;id = 813
;pos = 0,290
;sprpriority = 0
;postype = p1
;bindtime = 1

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 731, Screen Bound OFF]
type = Screenbound
triggerall = Movehit = 1
trigger1 = 1
value = 0

;---------------------------------------------------------------------------
; Shinryuken (Falling)
[Statedef 803] 
type = A
movetype = I
physics = N
anim = 752
ctrl = 0
velset = 0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 730, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(772) = 0
anim = 772
id = 772
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -2
removeongethit = 1
bind = p1

[State 742, Gravity]
type = VelAdd
trigger1 = 1
y = .39

[State 731, Screen Bound OFF]
type = Screenbound
trigger1 = 1
value = 0

[State 742, Land (Shinryuken Land state)]
type = ChangeState
trigger1 = pos Y >= 0
value = 804

;---------------------------------------------------------------------------
; Shinryuken (Landing)
[Statedef 804]
type = S
movetype = I
physics = S
anim = 814
ctrl = 0
velset = 0,0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -75,-10
postype = p1
sprpriority = -1
bindtime = 1

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Universal Off-screen bounce on-screen code!
[Statedef 810] 
type = S
movetype = I
physics = S
anim = 0
ctrl = 0
velset = 0,0

[State 3003, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 731, Screen Bound OFF]
type = Screenbound
trigger1 = 1
value = 0

[State 3003, 2]
type = PosAdd
triggerall = Time < 20
trigger1 = BackEdgeDist < -50
x = -80 - BackEdgeDist

[State 742, Dash Onscreen!]
type = ChangeAnim
trigger1 = Time = 20
value = 100

[State 101, Down we go]
type = PosAdd
triggerall = Time >= 20
trigger1 = animelem = 2
y = -5

[state 101, SprPriority]
type = sprpriority
trigger1 = 1
value = 1

[State 101, Down we go more!]
type = veladd
triggerall = Time >= 20
trigger1 = 1
y = 0.3

[State 105, Dashy Lines!]
type = explod
trigger1 = time = 20
anim = 734
postype = p1
pos = 0,0
bindtime = 1
sprpriority = 2
ownpal = 1

[State 101, VelSet]
type = Velset
trigger1 = Time = 20
x = 6.5
y = -2

[State 101, VelSet 2]
type = Velset
trigger1 = Time >= 20
x = 6.5

[State 101, 9]
type = ChangeState
triggerall = Time >= 20
trigger1 = (vel y > 0) && (pos y >= -5)
value = 102

;---------------------------------------------------------------------------
; Shippu Jinrai Kyaku (Begin)
[Statedef 820]
type = S
movetype = A
Physics = N
anim = 820
velset = 0,0
ctrl = 0
juggle = 0

[State 620, Bye Flames! 0]
type = RemoveExplod
trigger1 = Time = 0
id = 760

[State 620, Bye Flames! 1]
type = RemoveExplod
trigger1 = Time = 0
id = 770

[State 620, Bye Flames! 2]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 620, Bye Flames! 3]
type = RemoveExplod
trigger1 = Time = 0
id = 772

[State 620, Bye Flames! 4]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 620, Bye Flames! 5]
type = RemoveExplod
trigger1 = Time = 0
id = 774

[State 620, Bye Flames! 6]
type = RemoveExplod
trigger1 = Time = 0
id = 775

[State 740, Ji-itaze!]
type = PlaySnd
trigger1 = Time = 14
value = S3,2

[State 790, Shippu Jinrai Kyaku!]
type = PlaySnd
trigger1 = Time = 15
value = S3,1
channel = 1

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (movehit)
anim = 792
id = 792
bindtime = 900
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
scale = 1.08,1.08
sprpriority = -5

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 14
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 14
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 14
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 14
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 14
pos = -14,35
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 2100, 1]
type = VelSet
trigger1 = Time >= 15
x = 5.5

[State 2000, 3]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
attr = S, HA
getpower = 0
animtype  = High
damage    = 22,4
guardflag = MA
pausetime = 4,6
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = -7
air.velocity = -2.2,-3.2
sparkno = 2
sparkxy = 0,-90
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
kill = 0

[State 2000, 4]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 22
trigger2 = AnimElem = 23
attr = S, HA
getpower = 0
animtype  = High
damage    = 20,4
guardflag = MA
pausetime = 4,4
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = -7
air.velocity = -2.2,-3.2
sparkno = 2
sparkxy = 0,-90
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
kill = 0

[State 2000, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 5
attr = S, NA
getpower = 0
animtype  = High
damage    = 45,5
guardflag = MA
pausetime = 4,4
hitsound   = S1,5
guardsound = S1,0
ground.type = Low
sparkno = 3
sparkxy = 0,-50
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = -7
air.velocity = -2,-2.3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
kill = 0

[State 2000, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 17
trigger2 = AnimElem = 29
attr = S, NA
getpower = 0
animtype  = High
damage    = 45,5
guardflag = MA
pausetime = 4,4
hitsound   = S1,5
guardsound = S1,0
ground.type = Low
sparkno = 3
sparkxy = 0,-50
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = 5
air.velocity = -2,-2.3
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
kill = 0

[State 820, Respectable Width]
type = Width
trigger1 = Time > 15 && Time < 74
value = 30

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit && AnimElemTime(12) >= 0 
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 750, Upside Down Fire Explod] 
type = Explod
trigger1 = AnimElem = 21
trigger2 = AnimElem = 22
anim = 824
pos = 80,-85
postype = p1
sprpriority = 5
supermove = 1
bindtime = -1
shadow = -1,0,0

[State 750, Normal Fire Explod] 
type = Explod
trigger1 = AnimElem = 16
trigger2 = AnimElem = 28
anim = 823
pos = 80,-35
postype = p1
sprpriority = 5
supermove = 1
bindtime = -1
shadow = -1,0,0

[State 750, FOOM] 
type = PlaySnd
trigger1 = AnimElem = 21
trigger2 = AnimElem = 22
trigger3 = AnimElem = 16
trigger4 = AnimElem = 28
value = S100,0

[State 820, Hit or Miss!]
type = Changestate
trigger1 = Animtime = 0
value = 821
;-----------------------------------------------------------------------------
; Shippu Jinrai Kyaku (It's all on you)
[Statedef 821]
type = S
movetype = A
Physics = N
anim = 822
velset = 0,0
ctrl = 0
juggle = 0

[State 821, Hoo!]
type = PlaySnd
trigger1 = AnimElem = 3,1 && !movecontact
value = S0,3

[State 1100, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
getpower = 0
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 8,8
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-6
air.velocity = 0,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 820, I hit!]
type = Changestate
trigger1 = Movehit
value = 822

[State 821, Oh well.]
type = Changestate
trigger1 = AnimTime = 0 && !Movehit
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Shippu Jinrai Kyaku (I hit!  Let's hurricane kicking!)
[Statedef 822]
type = A
movetype = A
physics = N
ctrl = 0
anim = 821
juggle = 1

[State 750, Up we go.]
type = VelSet
trigger1 = time != 1
x = 6
y = -4.5

[State 750, Fire Explod] 
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 16
trigger5 = Animelem = 20
trigger6 = AnimElem = 24
trigger7 = AnimElem = 28
anim = 823
pos = 60,-45
postype = p1
sprpriority = 5
supermove = 1
bindtime = -1
shadow = -1,0,0

[State 750, FOOM] 
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 16
trigger5 = Animelem = 20
trigger6 = AnimElem = 22
value = S100,0

[State 1100, 1]
type = HitDef
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
trigger4 = Animelem = 20
trigger5 = AnimElem = 24
trigger6 = AnimElem = 28
attr = A, SA
getpower = 0
animtype  = High
damage    = 12, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-4
air.velocity = -2,-6
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 1100, Let's Button Mashing!]
type = HitDef
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
attr = A, SA
getpower = 0
animtype  = High
damage    = 5,1
guardflag = MA
pausetime = 0,0
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-5
air.velocity = -2,-7
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
trigger5 = animelem = 10
trigger6 = animelem = 12
trigger7 = animelem = 14
trigger9 = Animelem = 20
trigger10 = AnimElem = 22
value = S6,3

[State 750, I hit him!  I did!]
type = ChangeState
trigger1 = (AnimTime = 0) && (MoveContact)
value = 823

[State 750, I missed him]
type = ChangeState
trigger1 = (AnimTime = 0) && (!MoveContact)
value = 781

;---------------------------------------------------------------------------
; Jinrai Kyaku Down
[Statedef 823]
Type = A
Movetype = A
Physics = S
velset = 0,0
Anim = 784

[State 691, Yeah!]
type = PlaySnd
trigger1 = Time = 0 
value = S0,5

[State 780, 1]
type = HitDef
trigger1 = Time = 0
attr = S, SA
getpower = 0
animtype  = High
damage    = 40, 9
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-1
air.velocity = -7,-1
fall.recover = 0
fall = 1
fall.yvelocity = -.2
ground.cornerpush.veloff = -12
air.cornerpush.veloff = -12
down.cornerpush.veloff = 0

[State 780, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 781

;---------------------------------------------------------------------------
; Alpha Counter 1 - Counter Shoryuken
[Statedef 830]
type = S
movetype = A
Physics = N
anim = 830
velset = 0,0
ctrl = 0
juggle = 0
sprpriority = 4

[State 740, Kuraie!]
type = PlaySnd
trigger1 = Time = 1
volume = 100
value = S12000,0

[State 740, Counter!]
type = PlaySnd
trigger1 = Time = 1
value = S9,2

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 4
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 10
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 4
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 4
pos = 35,-60
anim = F3
time = 10
poweradd = 0
sound = S1,3

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 740, Sho-Ryuken!]
type = PlaySnd
trigger1 = Time = 6
volume = 100
value = S10000,1

[State 740, 1]
type = VelSet
trigger1 = Time = 6
x = 0
y = 0
z = 0

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
damage    = 70,10
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 13,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S20,2
guardsound = S1,0
ground.type = Low
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -2,-7
air.velocity = -2,-7
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = -10.5
air.cornerpush.veloff = -8.5

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
damage    = 70,10
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 14,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S20,2
guardsound = S1,0
ground.type = Low
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -2,-13
air.velocity = -2,-13
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = -10.5
air.cornerpush.veloff = -8.5

[State 1110, 6]
type = NotHitBy
trigger1 = Time = 4
value = , N, S
time = 7

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 730, The all-consuming flames]
type = Explod
trigger1 = Animelem = 3 && NumExplod(770) = 0
anim = 770
id = 770
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 5
id = 770

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 5 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 741

;---------------------------------------------------------------------------
; Alpha Counter 2 - Counter Tatsumaki
[Statedef 840]
type = A
movetype = A
Physics = N
anim = 840
velset = 0,0
ctrl = 0
juggle = 0
sprpriority = 4

[State 740, Kuraie!]
type = PlaySnd
trigger1 = Time = 1
volume = 100
value = S12000,0

[State 740, Counter!]
type = PlaySnd
trigger1 = Time = 1
value = S9,2

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 4
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 10
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 4
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 4
pos = 35,-60
anim = F3
time = 10
poweradd = 0
sound = S1,3

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0


[State 740, He's mad!]
type = PlaySnd
trigger1 = Time = 6
volume = 100
value = S10000,2

[State 740, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 0
y = -.6
z = 0

[State 750, Fire Explod] 
type = Explod
trigger1 = animelem = 10
trigger2 = animelem = 14
trigger3 = animelem = 18
anim = 823
pos = 60,-45
postype = p1
sprpriority = 5
supermove = 1
bindtime = -1
shadow = -1,0,0

[State 750, Fire Explod (Other Side)] 
type = Explod
trigger1 = animelem = 16
trigger2 = animelem = 12
trigger3 = animelem = 20
anim = 825
pos = -60,-45
postype = p1
sprpriority = 5
supermove = 1
bindtime = -1
shadow = -1,0,0

[State 750, FOOM] 
type = PlaySnd
trigger1 = animelem = 10
trigger2 = animelem = 14
trigger3 = animelem = 18
trigger4 = animelem = 16
trigger5 = Animelem = 12
trigger6 = AnimElem = 20
value = S100,0

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
attr = A, SA
damage    = 35,10
animtype  = Hard
getpower  = 0
givepower = 10
hitflag = MAf
guardflag = MA
pausetime = 3,4
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = 7,-1
air.velocity = 7,-1
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 12
trigger2 = AnimElem = 16
attr = A, SA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 10
hitflag = MAf
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -7,-1
air.velocity = -7,-1
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 20
attr = A, SA
damage    = 30,10
animtype  = Hard
getpower  = 0
givepower = 10
hitflag = MAf
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -7,-6
air.velocity = -7,-6
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 1110, 6]
type = PlayerPush
trigger1 = 1
value = 0

[State 1110, 6]
type = NotHitBy
trigger1 = Time = 4
value = , N, S
time = 7

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 740, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 781

;---------------------------------------------------------------------------
; Rolling Strike_X
[Statedef 850]
type    = A  
physics = N   
anim = 40
poweradd = 70   
ctrl = 0      

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 720, Not quite hit by]
type = Nothitby
trigger1 = 1
time = 1
value = SCA, AA, AT, AP

[State 100, 2]
type = Changestate
trigger1 = Time = 2
value = 851

[State 100, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0,4

;---------------------------------------------------------------------------
; Rolling Strike_X (Dashing)
[Statedef 851]
type = A
physics = N
anim = 100
velset = 3.5,-2

[State 720, Not quite hit by]
type = Nothitby
trigger1 = 1
time = 1
value = SCA, AA, AT, AP

[State 101, Up we go]
type = PosAdd
trigger1 = animelem = 2
y = -5

[state 101, SprPriority]
type = sprpriority
trigger1 = 1
value = 1

[State 101, Down we go more!]
type = veladd
trigger1 = 1
y = 0.3

[State 101, No Pushing]
type = Playerpush
trigger1 = 1
value = 0

[State 101, 9]
type = ChangeState
trigger1 = (vel y > 0) && (pos y >= -5)
value = 852

;----------------------------------------------------------------------------
; Rolling Strike_X (Rolling)
[Statedef 852]
type = S
physics = N
anim = 5700
velset = 3.5,0

[State 102, 1]
type = Posset
trigger1 = Time = 0
y = 0

[State 102, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 853

;---------------------------------------------------------------------------
; Rolling Strike X,Y, AND Z (Striking, of course)
[Statedef 853]
type    = S
movetype= A
physics = C
juggle = 6
ctrl = 0 
anim = 860
       
[State 250, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = Time = 0
attr = S, NA
damage = 50,5
animtype = Hard
guardflag = MA    
hitflag = MAf  
getpower = 30,15
givepower = 15,8
priority = 7, Hit
pausetime = 12,12
sparkno = 2
sparkxy = 0,-70
hitsound = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20        
ground.hittime  = 20       
ground.velocity = -1,-11.5       
airguard.velocity = -1,-11.5
guard.velocity = -.5     
air.type = High
air.velocity = 0,-10
air.juggle = 4
air.slidetime = 20
air.hittime = 20 
airguard.velocity = -.5,-4
fall = 1
fall.recover = 0
fall.yvelocity = -.2

[State 250, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 250, Kuraie!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,3

[State 250, It's RASEN TIME]
type = ChangeState
trigger1 = movehit && (command = "hadoken_x" || command = "hadoken_y" || command = "hadoken_z")
trigger1 = Time >= 10
value = 880

[State 250, It's HURRICANE KICK TIME]
type = ChangeState
trigger1 = movehit && (command = "rollinghkick")
trigger1 = Time >= 10
value = 882

[State 250, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Rolling Strike_Y
[Statedef 860]
type    = A   
physics = N   
anim = 40   
poweradd = 70
ctrl = 0      

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 720, Not quite hit by]
type = Nothitby
trigger1 = 1
time = 1
value = SCA, AA, AT, AP

[State 100, 2]
type = Changestate
trigger1 = Time = 2
value = 861

[State 100, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0,4

;---------------------------------------------------------------------------
; Rolling Strike_Y (Dashing)
[Statedef 861]
type = A
physics = N
anim = 100
velset = 4.6,-2

[State 720, Not quite hit by]
type = Nothitby
trigger1 = 1
time = 1
value = SCA, AA, AT, AP

[State 101, Up we go]
type = PosAdd
trigger1 = animelem = 2
y = -5

[state 101, SprPriority]
type = sprpriority
trigger1 = 1
value = 1

[State 101, Down we go more!]
type = veladd
trigger1 = 1
y = 0.3

[State 101, No Pushing]
type = Playerpush
trigger1 = 1
value = 0

[State 101, 9]
type = ChangeState
trigger1 = (vel y > 0) && (pos y >= -5)
value = 862

;----------------------------------------------------------------------------
; Rolling Strike_Y (Rolling)
[Statedef 862]
type = S
physics = N
anim = 5700
velset = 4.6,0

[State 102, 1]
type = Posset
trigger1 = Time = 0
y = 0

[State 102, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 853

;---------------------------------------------------------------------------
; Rolling Strike_Z
[Statedef 870]
type    = A   
physics = N   
anim = 40   
poweradd = 70
ctrl = 0      

[State 720, Not quite hit by]
type = Nothitby
trigger1 = 1
time = 1
value = SCA, AA, AT, AP

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 100, 2]
type = Changestate
trigger1 = Time = 2
value = 871

[State 100, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0,4

;---------------------------------------------------------------------------
; Rolling Strike_Z (Dashing)
[Statedef 871]
type = A
physics = N
anim = 100
velset = 6.5,-2

[State 720, Not quite hit by]
type = Nothitby
trigger1 = 1
time = 1
value = SCA, AA, AT, AP

[State 101, Up we go]
type = PosAdd
trigger1 = animelem = 2
y = -10

[state 101, SprPriority]
type = sprpriority
trigger1 = 1
value = 1

[State 101, Down we go more!]
type = veladd
trigger1 = 1
y = 0.3

[State 101, No Pushing]
type = Playerpush
trigger1 = 1
value = 0

[State 101, 9]
type = ChangeState
trigger1 = (vel y > 0) && (pos y >= -5)
value = 872

;----------------------------------------------------------------------------
; Rolling Strike_Z (Rolling)
[Statedef 872]
type = S
physics = N
anim = 5700
velset = 6.5,0

[State 102, 1]
type = Posset
trigger1 = Time = 0
y = 0

[State 102, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 853

;-------------------------------------------------------------------------------
; Rasen (Rising)
[Statedef 880]
type = A
movetype = A
physics = N
anim = 861
poweradd = 100
juggle = 1
ctrl = 0

[State 250, Up and Away]
type = Velset
trigger1 = Time = 7
x = .5
y = -12

[State 250, Gravity]
type = VelAdd
triggerall = Time > 7
trigger1 = 1
y = .39

[State 880, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = Time = 0
attr = A, SA
animtype = Hard
damage = 60,6
hitflag = MAF
guardflag = MA
pausetime = 14,14
sparkno = 2                     
sparkxy = 0,-70
hitsound = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 30
ground.hittime = 30
ground.velocity = -5,-9
guard.velocity = -1
air.velocity = -2,-9
airguard.velocity = -1,-4.5
fall = 1
fall.recover = 0
fall.yvelocity = -.2

[State 880, Fall!]
type = ChangeState
triggerall = Time > 7
trigger1 = Vel Y >= 0
value = 881

;-------------------------------------------------------------------------------
; Rasen (Falling)
[Statedef 881]
type = A
movetype = A
physics = N
anim = 862
ctrl = 0

[State 250, Down and Away]
type = VelAdd
trigger1 = 1
y = .39

[State 880, To Landing State for Shinryuken (cheese reduction)]
type = ChangeState
trigger1 = Pos Y >= 0
value = 883
ctrl = 1

;---------------------------------------------------------------------------
; Rasen (Landing)
[Statedef 883]
type = S
movetype = I
physics = S
anim = 863
ctrl = 0
velset = 0,0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -75,-10
postype = p1
sprpriority = -1
bindtime = 1

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Rolling Strike Hurricane Kick
[Statedef 882]
type = A
movetype = A
physics = N
anim = 786
poweradd = 100
juggle = 1
velset = 0,-14
ctrl = 0

[State 882, Tatsu Ma..etc]
type = PlaySnd
trigger1 = Time = 0
value = S3,0

[State 882, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 9
trigger6 = AnimElem = 11
attr = A, SA
animtype = Up
damage = 40,2
hitflag = MAF
guardflag = MA
pausetime = 2,2
sparkno = 2
sparkxy = 0,-50
hitsound = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 30
ground.hittime = 30
ground.velocity = -1,-8
guard.velocity = -.5
air.velocity = -1,-8
airguard.velocity = -.5,-3
fall = 1
fall.yvelocity = -.2
fall.recover = 0

[State 250, Down and Away]
type = VelAdd
trigger1 = 1
y = .39

[State 880, To Landing State for Shinryuken (cheese reduction)]
type = ChangeState
triggerall = Time > 0
trigger1 = Pos Y >= 0
value = 804
ctrl = 1

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick A
[Statedef 890]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 783
juggle = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time != 1
x = 4.5 
y = -3.5  

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 1100, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElemTime(1) = 2
attr = S, SA
animtype  = High
damage    = 40, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-6
air.velocity = 0,-5

[State 1100, 1]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
attr = A, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-4
air.velocity = -2,-5

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 750, Fall!]
type = ChangeState
trigger1 = (AnimTime = 0) 
value = 781

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick B
[Statedef 891]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 783
juggle = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time != 1
x = 0
y = -2.5  

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 1100, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElemTime(1) = 2
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-5
air.velocity = 0,-5

[State 1100, 1]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
attr = A, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -.5,-5
air.velocity = -.5,-5

[State 1100, 1]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = animelem = 10
trigger2 = Animelem = 14
trigger3 = AnimElem = 18
attr = A, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -.5,-5
air.velocity = -.5,-5

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 750, Fall!]
type = ChangeState
trigger1 = (AnimTime = 0) 
value = 781

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick C
[Statedef 892]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 783
juggle = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 3
y = -3.3  

[State 750, Straight]
type = VelSet
trigger1 = time = 9
x = 4
y = 0

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 1100, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElemTime(1) = 2
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6,0
air.velocity = -6,0

[State 1100, 1]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = animelem = 8
trigger2 = animelem = 12
attr = A, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6,0
air.velocity = -6,0

[State 1100, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = animelem = 16
attr = A, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5,-3
air.velocity = -5,-3
fall = 1
fall.recover = 0
fall.yvelocity = -.2

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 750, Fall!]
type = ChangeState
trigger1 = (AnimTime = 0) 
value = 894

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick C, Falling
[Statedef 894]
Type = A
Movetype = A
Physics = A
Anim = 785

[State 785, Move forward]
type = VelSet
trigger1 = Time = 0
x = 2

;---------------------------------------------------------------------------
; Ground Hado BURST! 
[Statedef 900]
type = S
movetype = A
Physics = N
anim = 710
velset = 0,0
ctrl = 0
juggle = 0

[State 620, Bye Flames! 0]
type = RemoveExplod
trigger1 = Time = 0
id = 760

[State 620, Bye Flames! 1]
type = RemoveExplod
trigger1 = Time = 0
id = 770

[State 620, Bye Flames! 2]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 620, Bye Flames! 3]
type = RemoveExplod
trigger1 = Time = 0
id = 772

[State 620, Bye Flames! 4]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 620, Bye Flames! 5]
type = RemoveExplod
trigger1 = Time = 0
id = 774

[State 620, Bye Flames! 6]
type = RemoveExplod
trigger1 = Time = 0
id = 775

[State 740, Ikuze!]
type = PlaySnd
trigger1 = Time = 1
volume = 100
value = S11000,0


[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Little Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 4
value = S9,4

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 4)
anim = 792
id = 792
bindtime = 900
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 4
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 4
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 4
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 4
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 4
pos = -2,8
anim = S793
time = 34
poweradd = -1000
sound = S9,0

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 900, No missing if up close!]
type = Width
trigger1 = Time = [6,37]
value = 10,0

[State 700, Go Fireball!]
type = Helper
trigger1 = AnimElem = 4
helpertype = Normal
name = "Hado...BURST!"
postype = p1
pos = 65,-21
stateno = 901
ID = 704
ownpal = 1
persistent = 0

[State 900, Back to Standing!]
type = ChangeState
trigger1 = AnimTime = 0 
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hado Burst (Projectile Helper)
[Statedef 901]
type = S
physics = N
movetype = A
anim = 874
poweradd = 0
velset = 5,0
ctrl = 0

[State 703, X Accel]
type = VelAdd
trigger1 = 1
x = .5

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Always on Top!]
type = Sprpriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 2051, Attacking!]
type = HitDef
triggerall = EnemyNear, Anim != 5070
trigger1 = Time >= 0 
attr = S, HP
damage = 69,25
getpower = 0,0
givepower = 25
animtype = Hard
hitflag = MAFP
guardflag = MA
pausetime = 2,18
sparkno = 3
sparkxy = 0,-50
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 60
ground.hittime  = 60
ground.velocity = -7,-1.5
guard.velocity = -3.5
air.velocity = -7,-1.5
airguard.velocity = -3.5,-.75
fall = 1
fall.recover = 0
fall.yvelocity = -.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 706, Dust Trail]
type = Explod
trigger1 = Time = 0
anim = 747
ID = 747
pos = -28,26
postype = p1
sprpriority = 5
bindtime = -1
removetime = -1
shadow = -1
ownpal = 1

[State 2050, I hit!]
type = ChangeState
trigger1 = FrontEdgeBodyDist < -40
trigger2 = HitCount = 4 
value = 902

[State 2050, Burst Guarded]
type = ChangeState
trigger1 = Moveguarded
value = 903

;---------------------------------------------------------------------------
; Hado Burst Hit!
[Statedef 902]
type = S
physics = N
movetype = A
poweradd = 0
velset = 0,0
ctrl = 0

[State 2051, Illusion] 
type = Explod
trigger1 = Time = 0
anim = 871
ID = 871
pos = 0,0
postype = p1
sprpriority = 2
bindtime = 1
removetime = -2
shadow = -1,0,0
ownpal = 1

[State 706, Dust Trail Dissipating] 
type = Explod
trigger1 = Time = 0
anim = 748
ID = 748
pos = 26,15
postype = p1
sprpriority = 5
bindtime = 1
removetime = -2
vel = 1,0
shadow = -1
ownpal = 1

[State 2050, I've no more NEED for you Explod!]
type = RemoveExplod
trigger1 = Time = 0
ID = 747

[State 2050, I've no more NEED for you.]
type = Destroyself
trigger1 = Time = 1

;---------------------------------------------------------------------------
; Hado Burst Guarded
[Statedef 903]
type = S
physics = N
movetype = A
anim = 870
poweradd = 0
velset = 5,0
ctrl = 0

[State 703, X Accel]
type = VelAdd
trigger1 = 1
x = .5

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 2051, Always on Top!]
type = Sprpriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 2051, Getting Hit Would Make for Bugs]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, AA, AT, AP
ignorehitpause = 1

[State 2051, Attacking!]
type = HitDef
triggerall = EnemyNear, Anim != 5070
trigger1 = Time = 0
trigger2 = Movecontact && HitCount < 4
attr = S, HP
damage = 72,25
getpower = 0
givepower = 25
animtype = Hard
hitflag = MAF
guardflag = MA
pausetime = 2,18
sparkno = 3
sparkxy = 0,-50
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 60
ground.hittime  = 60
ground.velocity = -7,-1.5
guard.velocity = -3.5
air.velocity = -7,-1.5
airguard.velocity = -3.5,-.75
fall = 1
fall.recover = 0
fall.yvelocity = -.2

[State 2050, I hit!]
type = ChangeState
trigger1 = Time = 3
value = 902

;---------------------------------------------------------------------------
; Air Hado BURST!
[Statedef 910]
type    = A
movetype= A
physics = S
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = 711
juggle = 5

[State 712, 1]
type = VelMul
trigger1 = Time = 0
x = .02 ;.05
y = .2  ;.02

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 740, Ikuze!]
type = PlaySnd
trigger1 = Time = 2
volume = 100
value = S11000,0

[State 790, Hadoken!]
type = PlaySnd
trigger1 = Time = 5
volume = 100
value = S10000,0

[State 790, Little Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 4
value = S9,4

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 4)
anim = 792
id = 792
bindtime = 900
removetime = -1
removeongethit = 1
postype = Back
scale = 1.08,1.08
pos = 0, 0
sprpriority = -5

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 4
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 4
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 4
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 4
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 4
pos = 0,-15
anim = S793
time = 34
sound = S9,0
poweradd = -1000

[State 900, 1]
type = Projectile
trigger1 = AnimElem = 3
attr = A, HP
projanim = 875
projhitanim = 873
projheightbound = -240,30
projID = 872
projhits = 4
projmisstime = 0
offset = 40,-20
velocity = 5,2
accel = .5,.5
damage = 72,25
getpower = 0
givepower = 25
priority = 5
sprpriority = 2
animtype = Hard
hitflag = MAFD
guardflag = MA
pausetime = 2,18
sparkno = 3
sparkxy = 0,-50
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 60
ground.hittime  = 60
ground.velocity = -7,-1.5
guard.velocity = -3.5
air.velocity = -7,-1.5
airguard.velocity = -3.5,-.75
fall = 1
fall.recover = 0
fall.yvelocity = -.2

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= -1
y = -1

[State 620, Aerial RAVE!]
type = Varset
trigger1 = projhit872 = 1 && prevstateno = [600,641]
trigger2 = projhit872 = 1 && (prevstateno = 751 || prevstateno = 761 || prevstateno = 771)
var(10) = 1

[State 712, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
; Shin Tatsu Maki Senpuu Kyaku! (Begin)
[Statedef 920]
type = S
movetype = A
Physics = N
anim = 880
velset = 0,0
ctrl = 0
juggle = 0

[State 620, Bye Flames! 0]
type = RemoveExplod
trigger1 = Time = 0
id = 760

[State 620, Bye Flames! 1]
type = RemoveExplod
trigger1 = Time = 0
id = 770

[State 620, Bye Flames! 2]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 620, Bye Flames! 3]
type = RemoveExplod
trigger1 = Time = 0
id = 772

[State 620, Bye Flames! 4]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 620, Bye Flames! 5]
type = RemoveExplod
trigger1 = Time = 0
id = 774

[State 620, Bye Flames! 6]
type = RemoveExplod
trigger1 = Time = 0
id = 775

[State 740, Kuraie!]
type = PlaySnd
trigger1 = Time = 3 && palno <= 6
value = S8,3

[State 740, Kuraie!]
type = PlaySnd
trigger1 = Time = 3 && palno >= 7
volume = 100
value = S12000,0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 3)
anim = 792
id = 792
bindtime = 900
removetime = -1
removeongethit = 1
postype = Back
scale = 1.08,1.08
pos = 0, 0
sprpriority = -5

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 3
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 3
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 3
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 3
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 3
pos = -32,-5
anim = S793
time = 34
poweradd = -1000
sound = S9,0

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 740, 2]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 5 
attr = S, HA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 10,10
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = 0,-13
air.velocity = 0,-13
down.bounce = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 740, Rise!]
type = ChangeState
trigger1 = Time = 11
value = 921

;---------------------------------------------------------------------------
; Shin Tatsu Make Senpuu Kyaku! (Up we go)
[Statedef 921]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0,-12

[State 750, He's mad!]
type = Playsnd
trigger1 = time = 1 && palno <= 6
value = S12,2

[State 750, He's mad!]
type = Playsnd
trigger1 = time = 1 && palno >= 7
volume = 100
value = S10000,2

;[State 731, Pillar!]
;type = EXPLOD
;trigger1 = (Time = 0) && (numexplod(812) = 0)
;anim = 812
;id = 812
;pos = 0,0
;postype = p1
;sprpriority = 0
;removetime = -1
;bindtime = 1

[State 741, Lizard Snake-like noise]
type = Playsnd
trigger1 = Time = 0
value = S9,5

[State 741, 3]
type = VelAdd
trigger1 = 1
y = .23

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 14
attr = A, HA
damage    = 40,10
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 4,4
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = 0,-7
air.velocity = 0,-7
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
down.bounce = 0
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
fall.envshake.time = 30
fall.envshake.freq = 180
fall.envshake.ampl = 3
fall.envshake.phase = 90
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 12
attr = A, HA
damage    = 40,10
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 4,4
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = 0,-7
air.velocity = 0,-7
fall.xvelocity = 0
fall.yvelocity = -1
fall = 1
down.bounce = 0
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
fall.envshake.time = 30
fall.envshake.freq = 180
fall.envshake.ampl = 3
fall.envshake.phase = 90
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 750, FOOM] 
type = PlaySnd
trigger1 = AnimElem = 13
trigger2 = AnimElem = 11
value = S100,0

[State 741, To Falling State (Hit)]
type = ChangeState
trigger1 = Vel Y >= 0 && movehit
value = 922

[State 741, To Falling State (Missed)]
type = ChangeState
trigger1 = Vel Y >= 0 && !movehit
value = 923

[State 750, Fire Explod] 
type = Explod
trigger1 = animelem = 14
anim = 823
pos = 60,-45
postype = p1
sprpriority = 5
supermove = 1
bindtime = -1
shadow = -1,0,0

[State 750, Fire Explod (Other Side)] 
type = Explod
trigger1 = animelem = 15
anim = 825
pos = -60,-45
postype = p1
sprpriority = 5
supermove = 1
bindtime = -1
shadow = -1,0,0

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Shin Tatsu Maki Senpuu Kyaku Down
[Statedef 922]
Type = A
Movetype = A
Physics = S
velset = 0,0
Anim = 784

[State 691, Yeah!]
type = PlaySnd
trigger1 = Time = 0 && palno <= 6
value = S0,5

[State 780, 1]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = High
damage    = 60,10
guardflag = MA
getpower = 0
pausetime = 18,18
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-1
air.velocity = -7,-1
fall.recover = 0
fall = 1
fall.yvelocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 741, To Falling State]
type = ChangeState
trigger1 = AnimTime = 0
value = 923

;[State 731, Pillar!  GO AWAY!]
;type = EXPLOD
;trigger1 = (Time = 0) && (numexplod(813) = 0)
;anim = 813
;id = 813
;pos = 0,290
;sprpriority = 0
;postype = p1
;bindtime = 1

[State 731, Screen Bound OFF]
type = Screenbound
triggerall = Movehit = 1
trigger1 = 1
value = 0

;---------------------------------------------------------------------------
; Shin Tatsu Maki Senpuu Kyaku (Falling)
[Statedef 923] 
type = A
movetype = I
physics = N
anim = 785
ctrl = 0
velset = 0

;[State 731, Pillar!  GO AWAY!]
;type = EXPLOD
;trigger1 = (Time = 0) && (numexplod(813) = 0) && Prevstateno = 921
;anim = 813
;id = 813
;pos = 0,290
;sprpriority = 0
;postype = p1
;bindtime = 1

[State 742, Gravity]
type = VelAdd
trigger1 = 1
y = .39

[State 731, Screen Bound OFF]
type = Screenbound
trigger1 = 1
value = 0

[State 742, Land (Shinryuken Land state)]
type = ChangeState
trigger1 = pos Y >= 0
value = 804

;---------------------------------------------------------------------------
; Burst Mode Change
[Statedef 930] 
type = S
movetype = I
physics = N
anim = 890
ctrl = 0
velset = 0,0

[State 930, Var Change]
type = VarSet
trigger1 = Time = 14
var(9) = IfElse(Var(9) = 0, 1, 0)

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 14
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 14
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 14
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 14
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 191, Ikuze!]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4,0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 14
pos = 35,-5
anim = S793
time = 34
sound = S9,0

[State 930, Back to Standing]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Burst Mode Shoryureppa (Begin)
[Statedef 940]
type = S
movetype = A
physics = N
anim = 803
velset = 0,0
ctrl = 0

[State 740, Ikuze!]
type = PlaySnd
trigger1 = Time = 1
value = S4,0

[State 790, Sho-Ryu Reppa!]
type = PlaySnd
trigger1 = Time = 4
value = S13,0
channel = 1

[State 620, Bye Flames! 1]
type = RemoveExplod
trigger1 = Time = 0
id = 770

[State 620, Bye Flames! 2]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 620, Bye Flames! 3]
type = RemoveExplod
trigger1 = Time = 0
id = 772

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 1
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 1)
anim = 792
id = 792
bindtime = 900
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
scale = 1.08,1.08
sprpriority = -5

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 1
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 1
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 1
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ken] 
type = Explod
trigger1 = Time = 1
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 1
pos = 35,35
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.1

[State 720, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 720, Some Invinicibility...]
type = Nothitby
trigger1 = 1
time = 1
value = SCA, AA, AT, AP

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
attr = S, HA
damage    = 10,3
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 2100, 1]
type = VelSet
trigger1 = animelem = 1
x = 2.5

[State 720, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 941

;---------------------------------------------------------------------------
; Burst Mode Shoryureppa (Normal/Rising)
[Statedef 941]
type = A
movetype = A
physics = A
ctrl = 0
anim = 804
velset = 3,-4

[State 740, 2]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, HA
damage    = 10,3
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 35
ground.velocity = -4,0
air.velocity = -1.3,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 720, Some Invinicibility...]
type = Nothitby
trigger1 = 1
time = 1
value = SCA, AA, AT, AP

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 942

;---------------------------------------------------------------------------
; Burst Mode Shoryureppa (Normal/Falling)
[Statedef 942]
type = A
movetype = I
physics = N
anim = 752
ctrl = 0
velset = 2

[State 720, Some Invinicibility...]
type = Nothitby
trigger1 = Time = 0
time = 3
value = SCA, AA, AT, AP

[State 722, Gravity]
type = VelAdd
trigger1 = Time != 1000
y = .39

[State 722, Land now!]
type = ChangeState
trigger1 = pos y >= 0
value = 943

;---------------------------------------------------------------------------
; Burst Mode Shoryureppa (Normal/Landing)
[Statedef 943]
type = S
movetype = I
physics = S
anim = 753
ctrl = 0
velset = 2,0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Rise Again...]
type = ChangeState
trigger1 = AnimTime = 0
value = 944

;---------------------------------------------------------------------------
; Burst Mode Shoryureppa (Small Flaming/Begin)
[Statedef 944]
type = S
movetype = A
physics = N
anim = 803
velset = 0,0
ctrl = 0

[State 2100, 1]
type = VelSet
trigger1 = animelem = 1
x = 3.5

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 730, The small flames]
type = Explod
trigger1 = Animelem = 2 && NumExplod(760) = 0
anim = 760
id = 760
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
attr = S, HA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 720, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 945

;---------------------------------------------------------------------------
; Burst Mode Shoryureppa (Small Flaming/Rising)
[Statedef 945]
type = A
movetype = A
physics = A
ctrl = 0
anim = 804
velset = 4,-4

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 760

[State 730, The small flames]
type = Explod
trigger1 = Time = 0 && NumExplod(761) = 0
anim = 761
id = 761
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 731, WHOOSH!]
type = Playsnd
trigger1 = AnimElem = 1
value = S100,0

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, HA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 35
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 946

;---------------------------------------------------------------------------
; Burst Mode Shoryureppa (Small Flaming/Falling)
[Statedef 946]
type = A
movetype = I
physics = N
anim = 752
ctrl = 0
velset = 3

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 761

[State 730, The small flames]
type = Explod
trigger1 = Time = 0 && NumExplod(762) = 0
anim = 762
id = 762
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 722, Gravity]
type = VelAdd
trigger1 = Time != 1000
y = .39

[State 722, Land now!]
type = ChangeState
trigger1 = pos y >= 0
value = 947

;---------------------------------------------------------------------------
; Burst Mode Shoryureppa (Small Flaming/Landing)
[Statedef 947]
type = S
movetype = I
physics = S
anim = 753
ctrl = 0
velset = 3,0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 762

[State 730, The small flames]
type = Explod
trigger1 = Time = 0 && NumExplod(762) = 0
anim = 763
id = 763
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Rise Again...]
type = ChangeState
trigger1 = AnimTime = 0
value = 948

;---------------------------------------------------------------------------
; Burst Mode Shoryureppa (Flaming/Final Begin)
[Statedef 948]
type = S
movetype = A
Physics = N
anim = 803
velset = 0,0
ctrl = 0
juggle = 0

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 763

[State 2100, 1]
type = VelSet
trigger1 = animelem = 1
x = 7.5

[State 730, The all-consuming flames]
type = Explod
trigger1 = Animelem = 1 && NumExplod(770) = 0
anim = 770
id = 770
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 620, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 770

[State 730, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 3 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
attr = S, HA
damage    = 62,10
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5

[State 740, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = Animelem = 3
attr = S, HA
damage    = 62,10
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -8.5,-14.5
air.velocity = -8.5,-14.5
palfx.time = 50
palfx.add = 235,60,0
palfx.sinadd = 235,60,0,5

[State 620, Flare Whoosh!]
type = PlaySnd
trigger1 = AnimElemTime(3) >= 0 && movehit && Hitpausetime = 2
value = S20,2
ignorehitpause = 1

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 797

;---------------------------------------------------------------------------
; My old, OLD Super Jump Start
[Statedef 55650]
physics = S
type = S
anim = 40
ctrl = 0

[State 40, 1]
type = VarSet
triggerall = PrevStateno = 420 
trigger1 = 1
var(11) = 1

[State 40, 1]
type = VarSet
trigger1 = 1
var(17) = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -12

[State 40, 5]
type = VelSet
trigger1 = (AnimTime = 0) && (prevstateno = 100) && (sysvar(1) = 1)
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 55651
ctrl = 1

;---------------------------------------------------------------------------
; Actual JUMPING!
[Statedef 55651]
physics = A
type = A
anim = 41
ctrl = 1

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 5400, 2]
type = PlaySnd
trigger1 = Time = 0
value = S8,1

[State 52, Turn!]
type = Turn
trigger1 = P2Dist X < 0

[State 5400, 5]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = Time >= 0
trigger1 = Vel X <= 0
trigger1 = Vel X > -2
x = -.05

[State 5400, 5]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = command !="holdback"
trigger1 = Vel X < 5
trigger1 = Time >= 0
x = .10

[State 5400, 5]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = Time >= 0
trigger1 = Vel X = 0
x = 0

[State 710,1] ; Super Jump "lines"
type = explod
trigger1 = time = 1
anim = 740
postype = p1
pos = 0,-20
bindtime = 4
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 1
anim = 741
postype = p1
pos = 0,-20
bindtime = 7
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 1
anim = 742
postype = p1
pos = 0,-20
bindtime = 10
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 1
anim = 743
postype = p1
pos = 0,-20
bindtime = 13
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 16
anim = 744
postype = p1
pos = 0,-20
bindtime = 1
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 19
anim = 745
postype = p1
pos = 0,-20
bindtime = 1
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 22
anim = 746
postype = p1
pos = 0,-20
bindtime = 1
sprpriority = 2
ownpal = 1

[State 850, Super Jump Dust]
type = Explod
trigger1 = Time = 0
persistent = 0
anim = 731
pos = 0,29
postype = p1
sprpriority = 4
bindtime = 2

[State 850, dust1]
type = Explod
trigger1 = Time = 3
persistent = 0
anim = 732
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 3

[State 850, dust2]
type = Explod
trigger1 = Time = 6
persistent = 0
anim = 732
pos = -40,-40
postype = p1
sprpriority = 4
bindtime = 1

[State 850, dust3]
type = Explod
trigger1 = Time = 9
persistent = 0
anim = 732
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 3

[State 850, dust4]
type = Explod
trigger1 = Time = 12
persistent = 0
anim = 732
pos = -40,-40
postype = p1
sprpriority = 4
bindtime = 1

[State 850, dust5]
type = Explod
trigger1 = Time = 15
persistent = 0
anim = 732
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 3

[State 850, dust6]
type = Explod
trigger1 = Time = 18
persistent = 0
anim = 732
pos = -40,-40
postype = p1
sprpriority = 4
bindtime = 1

;---------------------------------------------------------------------------
; Overwritten Common1.cns states
;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5 && Anim != 1
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = IfElse(Var(9) = 1, 1, 0)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 52, Turn!]
type = Turn
trigger1 = P2Dist X < 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A
anim = IfElse(Vel X < 0, 48, 49)
ctrl = Var(17)

[State 52, Turn!]
type = Turn
trigger1 = P2Dist X < 0

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -75,-10
postype = p1
sprpriority = -1
bindtime = 1

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Turn!]
type = Turn
trigger1 = P2Dist X < 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
triggerall = (Var(3) = 0) && (Anim != 162)
trigger1 = 1
value = 150

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 1 && AnimElemTime(4) >= 0
trigger1 = 1
value = 162
elem = 4

[State 150, 2]
type = ChangeState
trigger1 = (HitShakeOver)
value = 151

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

[State 150, VarSet]
type = VarSet
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
var(3) = 1

;Slightly moves the character forward. (Push effect)
[State 150, PosAdd]
type = PosAdd
triggerall = NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
x = 5

[State 150, PushSnd]
type = PlaySnd
triggerall = Numhelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = S1,7

[State 154, Guard Push Spark]
type = Explod
triggerall = NumExplod(161) = 0 && NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
anim = 161
ID = 161
postype = p1
pos = 30,-20
bindtime = -1
sprpriority = 2
ownpal = 1

;Creates a helper, to push the opponent. The helper will be 
invisible.
[State 150, Push]
type = Helper
triggerall = Numhelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
ID = 160
name = "Guard_Push"
pos = 0, 0
postype = p1
stateno = 160
helpertype = normal
keyctrl = 0
ownpal = 0
ignorehitpause = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 150, Guard Push Anim]
type = ChangeAnim
triggerall = Anim != 162
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = 162

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
;anim = 150

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 0
trigger1 = Time = 0
value = 150

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 1 && AnimElemTime(4) >= 0
trigger1 = Time < GethitVar(hittime)
value = 162
elem = 4

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime) && (Var(3) = 0)
trigger2 = Var(3) = 1 && Time >= GethitVar(hittime) && Animtime = 0
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, VarSet]
type = VarSet
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
v = 3
value = 1

[State 154, Guard Push Spark]
type = Explod
triggerall = NumExplod(161) = 0 && NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
anim = 161
ID = 161
postype = p1
pos = 30,10
bindtime = -1
sprpriority = 2
ownpal = 1

[State 152, PushSnd]
type = PlaySnd
triggerall = Numhelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = S1,7

;Slightly moves the character forward. (Push effect)
[State 152, PosAdd]
type = PosAdd
triggerall = NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
x = 5

[State 152, Push]
type = Helper
triggerall = Numhelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
ID = 160
name = "Guard_Push"
pos = 0, 0
postype = p1
stateno = 160
helpertype = normal
keyctrl = 0
ownpal = 0
size.height = 200
size.ground.back = 30
size.ground.front = 30
ignorehitpause = 1

[State 152, 1]
type = ChangeAnim
triggerall = (Var(3) = 0) && (Anim != 163)
trigger1 = 1
value = 151

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 1 && AnimElemTime(3) >= 0
trigger1 = 1
value = 163
elem = 3

[State 150, Guard Push Anim]
type = ChangeAnim
triggerall = Anim != 163
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = 163

[State 152, 3]
type = ChangeState
trigger1 = (HitShakeOver)
value = 153

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
;anim = 151

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 0
trigger1 = Time = 0
value = 151

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 1 && AnimElemTime(3) >= 0
trigger1 = Time < GethitVar(hittime)
value = 163
elem = 3

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime) && Var(3) = 0 
trigger2 = Var(3) = 1 && Time >= GethitVar(hittime) && Animtime = 0
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
triggerall = (Var(3) = 0) && (Anim != 164)
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = (HitShakeOver)
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

[State 154, PosFreeze]
type = PosFreeze
trigger1 = NumHelper(160) > 0

[State 150, Guard Push Anim]
type = ChangeAnim
triggerall = Anim != 164
trigger1 = command = "xy"
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = 164

[State 154, VarSet]
type = VarSet
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
v = 3
value = 1

[State 154, Guard Push Spark]
type = Explod
triggerall = NumExplod(161) = 0 && Numhelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
anim = 161
ID = 161
postype = p1
pos = 30,-40
bindtime = -1
sprpriority = 2
ownpal = 1

[State 154, PushSnd]
type = PlaySnd
triggerall = NumHelper(160) = 0 
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = S1,7

[State 154, Push]
type = Helper
triggerall = NumHelper(160) = 0 
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
ID = 160
name = "Guard_Push"
pos = 0, 0
postype = p1
stateno = 160
helpertype = normal
keyctrl = 0
ownpal = 0
size.height = 200
size.ground.back = 30
size.ground.front = 30
ignorehitpause = 1

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
;anim = 152

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 0
trigger1 = Time = 0
value = 152

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 1
trigger1 = 1
value = 164
elem = 2

[State 155, 1a]
type = HitVelSet
trigger1 = Var(3) = 0
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command != "holdback"
value = 52

[State 155, 8]
type = ChangeState
trigger1 = sysvar(0)
value = 130

[State 155, PosFreeze]
type = PosFreeze
trigger1 = Var(3) = 1
trigger1 = NumHelper(160) > 0

[State 155, 1b]
type = HitVelSet
trigger1 = Var(3) = 1
trigger1 = !NumHelper(160)
x = 0
y = 1

[State 155, Off with ye!]
type = ChangeState
trigger1 = Var(3) = 1
trigger1 = NumHelper(160) = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Guard + Push
[Statedef 160] 
type = A
anim = 160 ;Invisible. Create a Clsn2 box to push opponent.

[State 160, VelSet]
type = VelSet
trigger1 = 1
x = ifelse(Time >= 0 && Time <= 10, 20, ifelse(Time >= 11 && Time <= 13, 12, 10))

;[State 160, PushSnd]
;type = PlaySnd
;trigger1 = Time = 1 && palno < 7
;value = S12,1

;[State 160, PushSnd]
;type = PlaySnd
;trigger1 = Time = 1 && palno > 6
;value = S6000,0

[State 160, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 160, NotHitBy]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 160, DestoySelf]
type = DestroySelf
trigger1 = Time = 20

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5001 ;HITG_SLIDE

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5011 ;HITC_SLIDE

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5035, Let's VarSet! (State 5080 tracker)]
type = VarSet
trigger1 = Prevstateno = 5080
var(5) = 1

[State 5035, 1]
type = ChangeAnim
triggerall = (Vel X = 0) && (PrevStateno != 5080)
trigger1 = Time = 7
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0 && (Var(5) = 0)
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, If Moving] ;Change anim when done with transition
type = ChangeAnim
triggerall = (Var(5) != 1) && (Vel X != 0)
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, If Not Moving] ;Change anim when done with transition
type = ChangeAnim
triggerall = (Var(5) != 1) && (Vel X = 0)
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5050, Down Anim if not moving]
type = ChangeAnim
trigger1 = anim = 5035
trigger1 = Vel Y >= -2
value = 5061
persistent = 0

[State 5050, Down Anim any other Time]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(Anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 14]
type = ChangeState
triggerall = Var(2) = 1
trigger1 = Time = 2
value = 5700 ;Recovery Roll.

[State 5100, 7]
type = ChangeState
triggerall = Var(2) = 0
trigger1 = Time = 0 && GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5100, 14]
type = ChangeState
triggerall = Var(2) = 1
trigger1 = Time = 2
value = 5700 ;Recovery Roll.

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = !Time

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = !Time

[State 5110, 5]
type = PosSet
trigger1 = !Time
y = 0

[State 5110, 5]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5110, 8]
type = VelSet
trigger1 = !Time
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 5110, SelfState]
type = SelfState
trigger1 = Alive && Time = 10 ;Const(data.liedown.time)
value = 5120

;---------------------------------------------------------------------------
; Recovery Roll
[Statedef 5700]
type = L
movetype = I
physics = S
ctrl = 0
anim = 5700
velset = 0,0

[State 5700, VelSet]
type = VelSet
trigger1 = 1
x = 7

[State 5700, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 5700, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5700, VarSet]
type = VarSet
trigger1 = Time = 0
var(2) = 0 
 
[State 5700, End]
type = ChangeState
trigger1 = Time >= 22
trigger2 = FrontEdgeBodyDist <= 10
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S
anim = IfElse(Var(9) = 1, 1, 0)

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[state 191, Turns Mode Special Entrance]
type = changestate
trigger1 = RoundsExisted = 0 && TeamMode = Turns && Roundno > 1
value = 192

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 5900, Standing]
type = ChangeState
trigger1 = roundno > 0 && TeamMode != Turns
value = 0





;---------------------------------------------------------------------------
; Shippu Jinrai Kyaku (Begin)
[Statedef 10000]
type = S
movetype = A
Physics = N
anim = 820
velset = 0,0
ctrl = 0
juggle = 0

[State 620, Bye Flames! 0]
type = RemoveExplod
trigger1 = Time = 0
id = 760

[State 620, Bye Flames! 1]
type = RemoveExplod
trigger1 = Time = 0
id = 770

[State 620, Bye Flames! 2]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 620, Bye Flames! 3]
type = RemoveExplod
trigger1 = Time = 0
id = 772

[State 620, Bye Flames! 4]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 620, Bye Flames! 5]
type = RemoveExplod
trigger1 = Time = 0
id = 774

[State 620, Bye Flames! 6]
type = RemoveExplod
trigger1 = Time = 0
id = 775

[State 740, Ji-itaze!]
type = PlaySnd
trigger1 = Time = 10
volume = 100
value = S11000,0

[State 790, Shippu Jinrai Kyaku!]
type = PlaySnd
trigger1 = Time = 20
value = S11000,1
volume = 100
channel = 1

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 14
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 14
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ken]
type = Explod
trigger1 = Time = 14
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ken]
type = Explod
trigger1 = Time = 14
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 14
pos = -14,35
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust]
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 2100, 1]
type = VelSet
trigger1 = Time >= 15
x = 5.5

[State 2000, 3]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 10
trigger2 = AnimElem = 11
attr = S, HA
getpower = 0
animtype  = High
damage    = 12,4
guardflag = MA
pausetime = 4,6
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = -7
air.velocity = -2.2,-3.2
sparkno = 2
sparkxy = 0,-90
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
kill = 0

[State 2000, 4]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 22
trigger2 = AnimElem = 23
attr = S, HA
getpower = 0
animtype  = High
damage    = 10,4
guardflag = MA
pausetime = 4,4
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = -7
air.velocity = -2.2,-3.2
sparkno = 2
sparkxy = 0,-90
palfx.time = 50
palfx.add = 0,-200,0;235,60,0
palfx.sinadd = 40,80,40,10;235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
kill = 0

[State 2000, 1]
type = HitDef
trigger1 = enemyNear, Anim != 5070
trigger1 = AnimElem = 5
attr = S, NA
getpower = 0
animtype  = High
damage    = 35,5
guardflag = MA
pausetime = 4,4
hitsound   = S1,5
guardsound = S1,0
ground.type = Low
sparkno = 3
sparkxy = 0,-50
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = -7
air.velocity = -2,-2.3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
kill = 0

[State 2000, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 17
trigger2 = AnimElem = 29
attr = S, NA
getpower = 0
animtype  = High
damage    = 35,5
guardflag = MA
pausetime = 4,4
hitsound   = S1,5
guardsound = S1,0
ground.type = Low
sparkno = 3
sparkxy = 0,-50
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = 5
air.velocity = -2,-2.3
palfx.time = 50
palfx.add = 0,-200,0;235,60,0
palfx.sinadd = 40,80,40,10;235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
kill = 0

[State 820, Respectable Width]
type = Width
trigger1 = Time > 15 && Time < 74
value = 30

[State 1000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit && AnimElemTime(12) >= 0
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 750, Upside Down Fire Explod]
type = Explod
trigger1 = AnimElem = 21
trigger2 = AnimElem = 22
anim = 824
pos = 80,-85
postype = p1
sprpriority = 5
supermove = 1
bindtime = -1
shadow = -1,0,0

[State 750, Normal Fire Explod]
type = Explod
trigger1 = AnimElem = 16
trigger2 = AnimElem = 28
anim = 823
pos = 80,-35
postype = p1
sprpriority = 5
supermove = 1
bindtime = -1
shadow = -1,0,0

[State 750, FOOM]
type = PlaySnd
trigger1 = AnimElem = 21
trigger2 = AnimElem = 22
trigger3 = AnimElem = 16
trigger4 = AnimElem = 28
value = S100,0

[State 820, Hit or Miss!]
type = Changestate
trigger1 = Animtime = 0
value = 7000

;---------------------------------------------------------------------------
; Shoryureppa! (Begin)
[Statedef 7000]
type = S
movetype = A
Physics = N
anim = 803
velset = 0,0
ctrl = 0
juggle = 0

[State 7000, Bye Flames! 1]
type = RemoveExplod
trigger1 = Time = 0
id = 770

[State 7000, Bye Flames! 2]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 7000, Bye Flames! 3]
type = RemoveExplod
trigger1 = Time = 0
id = 772

[State 7000, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(774) = 0
anim = 774
id = 774
pos = 0,0
postype = p1
bindtime = -1
supermove = 1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 7000, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 2
id = 774

[State 7000, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 2 && NumExplod(775) = 0
anim = 775
id = 775
pos = 0,0
postype = p1
bindtime = -1
supermove = 1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 7000, Bye Flames!]
type = RemoveExplod
trigger1 = AnimElem = 3
id = 775

[State 7000, The all-consuming flames]
type = Explod
trigger1 = AnimElem = 3 && NumExplod(773) = 0
anim = 773
id = 773
pos = 0,0
postype = p1
bindtime = -1
superpause = 0
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 7000, Afterimages]
type = AfterImage
trigger1 = time = 4
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 7000, Dust]
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 7000, 1]
type = VelSet
triggerall = Time >= 4
trigger1 = 1
x = 7
ignorehitpause = 1

[State 7000, Temporary Invincibility]
type = Nothitby
trigger1 = Time >= 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 7000, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
attr = S, HA
damage    = 10,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAFD
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -6,-4
down.velocity = -5,-7
palfx.time = 50
palfx.add = 0,-200,0;235,60,0
palfx.sinadd = 40,80,40,10;235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 7000, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

[State 7000, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 7050

;---------------------------------------------------------------------------
; Shoryureppa (Part 1 - Rise)
[Statedef 7050]
type = S
movetype = A
physics = S
anim = 801
ctrl = 0
velset = 7, 0
juggle = 5

[State 7050, 1]
type = VelSet
trigger1 = 1
x = 7
ignorehitpause = 1

[State 7050, Temporary Invincibility]
type = Nothitby
trigger1 = 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 7050, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 773

[State 7050, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(771) = 0
anim = 771
id = 771
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -1
removeongethit = 1
bind = p1

[State 7050, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 7050, 2]
type = HitDef
triggerall = enemyNear, Anim != 5070
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, HA
damage    = 10,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,2
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 0,-200,0;235,60,0
palfx.sinadd = 40,80,40,10;235,60,0,5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0


[State 7050, To Falling State]
type = ChangeState
trigger1 = AnimTime = 0
value = 7051

[State 7050, FEEL THE BURN!]
type = Varset
triggerall = Var(18) = 0 && Movehit
trigger1 = Hitpausetime != 0
var(18) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Shoryureppa (Part 1 - Fall)
[Statedef 7051]
type = A
movetype = I
physics = S
anim = 802
ctrl = 0

[State 7051, Bye Flames!]
type = RemoveExplod
trigger1 = Time = 0
id = 771

[State 7051, The all-consuming flames]
type = Explod
trigger1 = Time = 0 && NumExplod(772) = 0
anim = 772
id = 772
pos = 0,0
postype = p1
bindtime = -1
sprpriority = 5
removetime = -2
removeongethit = 1
bind = p1

[State 7051, Temporary Invincibility]
type = Nothitby
trigger1 = AnimElem = 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 7051, Land (Shoryureppa part 2)]
type = ChangeState
trigger1 = AnimTime = 0
value = 793
;----------------------------------------------------------------------------


;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]

;---------------------------------------------------------------------------
;Gethit Sounds!

[State -2, Gethit Sound 1]
type = PlaySnd
triggerall = Time = 1
trigger1 = random < 150 && stateno = 5000
value = 5000,0

[state -2, Gethit Sound 2]
type = playsnd
triggerall = Time = 1
trigger1 = random < 150 && stateno = 5070
value = 5000,1

[state -2, Gethit Sound 3]
type = playsnd
triggerall = Time = 1
trigger1 = random < 150 && stateno = 5010
value = 5000,2

[state -2, Gethit Sound 4]
type = playsnd
triggerall = Time = 1
trigger1 = random < 150 && stateno = 5010
value = 5000,0


;---------------------------------------------------------------------------
;Danger!
[State -2, Danger]
type = PlaySnd
triggerall = Var(6) = 1
trigger1 = Life <= 200
value = S9,3

[State -2, Danger VarAdd]
type = varadd
triggerall = Life <= 200
trigger1 = Var(6)<= 2 
v = 6
value = 1

;---------------------------------------------------------------------------
;Miscellaneous
[State -2, PushEnd]
type = VarSet
trigger1 = var(3) != 0
trigger1 = stateno != [130, 160]
var(3) = 0

[State -2, Stop Music ^^]
type = StopSnd
trigger1 = Prevstateno = 193
channel = 1

[State -2, Stop Sound (Shoryureppa)]
type = StopSnd
triggerall = Stateno = [5000,5070]
trigger1 = Prevstateno = [790,798]
channel = 1

[State -2, Stop Sound (Shippu Jinrai Kyaku)]
type = StopSnd
triggerall = Stateno = [5000,5070]
trigger1 = Prevstateno = [820,823]
channel = 1

[State -2, Afterimages...GO AWAY]
type = AfterImageTime
trigger1 = stateno != [790,798] ;Shoryureppa
trigger1 = stateno != [800,804] ;Shinryuken
trigger1 = stateno != [820,823] ;Jinrai Kyaku
trigger1 = stateno != 900 && stateno != 910 ;Hado Burst
trigger1 = stateno != [920,923] ;Shin Tatsumaki Senpuu Kyaku 
trigger1 = stateno !=[940,948] ;Burst Shoryureppa
time = 0

[State -2, Pos Set for Dash Cancelling]
type = PosSet
triggerall = Prevstateno = [100,102]
trigger1 = stateno = [200,450]
trigger2 = stateno = [700,702]
trigger3 = stateno = 720 || stateno = 730 || stateno = 740
y = 0

[State -2, Dash Onscreen if Offscreen]
type = Changestate
triggerall = Roundstate = [2,3]
trigger1 = Pos Y >= 0 && stateno != 100 && stateno != 810 && movetype != H && BackEdgeDist < -35
value = 810

[State -2, Super BG gone!]
type = RemoveExplod
trigger1 = stateno !=[790,798] ;Shoryureppa
trigger1 = stateno !=[800,802] ;Shinryuken
trigger1 = stateno !=[820,823] ;Jinrai Kyaku
trigger1 = stateno !=900 && stateno != 910 ;Hado Burst
trigger1 = stateno !=[920,922] ;Shin Tatsu Maki Senpuu Kyaku
trigger1 = stateno !=[940,948] ;Burst Shoryureppa
ID = 792

[State -2, Pillar, GO AWAY FOR THE LOVE OF..!]
type = RemoveExplod
trigger1 = stateno != 801 && stateno != 802 && Stateno !=921
ID = 812

[State -2, Let's Screen Bounding!]
type = ScreenBound
trigger1 = Var(10) = 1 && FrontEdgeBodyDist > 30
value = 0

[State -2, Aerial Rave now Ends. Bound.]
type = Varset
trigger1 = statetype != A && stateno != 52
trigger2 = movetype = H
var(10) = 0

[State -2, Aerial Rave now Ends. Rave Mode.]
type = Varset
trigger1 = statetype != A && stateno != 52
trigger2 = movetype = H
var(11) = 0

[State -2, End of Super Jump]
type = Varset
trigger1 = statetype != A && stateno != 52
trigger2 = movetype = H
var(17) = 0

[State -2, Let's Debugging!]
type = DisplayToClipboard
trigger1 = 1
text = "Aerial Rave Var = %d || Fireball Poweradd = %d"
params = Var(10), Var(19)

;---------------------------------------------------------------------------
;Hyper Combo Finish Data

[State -2, Shipuu Shoryureppa KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = [7000,10000]
trigger2 = stateno = [7050,7051]
trigger3 = stateno = [790,798] ;Shoryureppa
trigger4 = stateno = [940,948] ;Burst Shoryureppa
anim = 855
pos = 50,50
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1


[State -2, Shinryuken KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = [800,802] ;Shinryuken
anim = 851
pos = 50,50
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Jinrai KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = [820,823] ;Jinrai Kyaku
anim = 852
pos = 0,50
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Hado Burst KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = 900 || stateno = 910 ;Hadou Burst
anim = 853
pos = 0,50
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Shin Tatumaki KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = [920,922] ;Shin Tatsu Maki Senpuu Kyaku
anim = 854
pos = -15,50
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Hyper Combo Finish Superpause]
type = SuperPause
triggerall = winko && Var(8)= 1
trigger1 = stateno = [790,798] ;Shoryureppa
trigger2 = stateno = [800,802] ;Shinryuken
trigger3 = stateno = [820,823] ;Jinrai Kyaku
trigger4 = stateno = 900 || stateno = 910 ;Hado Burst
trigger5 = stateno = [920,922] ;Shin Tatsu Maki Senpuu Kyaku
trigger6 = stateno = [940,948] ;Burst Shoryureppa
trigger7 = stateno = 7000
trigger8 = stateno = 10000
time = 30
anim = -1

[State -2, Hyper Combo Finish Noise]
type = playsnd
triggerall = winko && (Var(8)= 0)
trigger1 = stateno = [790,798] ;Shoryureppa
trigger2 = stateno = [800,802] ;Shinryuken
trigger3 = stateno = [820,823] ;Jinrai Kyaku
trigger4 = stateno = 900 || stateno = 910 ;Hado Burst
trigger5 = stateno = [920,922] ;Shin Tatsu Maki Senpuu Kyaku
trigger6 = stateno = [940,948] ;Burst Shoryureppa
trigger7 = stateno = 7000
trigger8 = stateno = 10000
value = S1,8

[State -2, Hyper Combo Finish Noise 2]
type = playsnd
triggerall = winko && (Var(8)= 0)
trigger1 = stateno = [790,798] ;Shoryureppa
trigger2 = stateno = [800,802] ;Shinryuken
trigger3 = stateno = [820,823] ;Jinrai Kyaku
trigger4 = stateno = 900 || stateno = 910 ;Hado Burst
trigger5 = stateno = [920,922] ;Shin Tatsu Maki Senpuu Kyaku
trigger6 = stateno = [940,948] ;Burst Shoryureppa
trigger7 = stateno = 7000
trigger8 = stateno = 10000
value = S9,1

[State -2, Hyper Combo Finish VarAdd]
type = varadd
triggerall = winko
trigger1 = Var(8)<= 2 
v = 8
value = 1

;---------------------------------------------------------------------------
;Dust Trail Data

[State -2, Dust Trail VarSet 1]
type = Varset
trigger1 = NumProjID(720) = 0 || ProjContact(720) = 1
var(13) = 1
ignorehitpause = 1

[State -2, Dust Trail VarSet 2]
type = Varset
trigger1 = NumProjID(720) = 1 && ProjContact(720) = 0
var(13) = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;Burning State

[State -2, FLAME!]
type = Explod
triggerall = Var(18) = 1
trigger1 = Hitpausetime = 2 && NumExplod(735) < 3
anim = ifelse(Random < 250, 736, 735)
id = 735
pos = 20,ifelse(Enemy, statetype = L, -60, -90)
random = 60,60
postype = p2
bindtime = -1
bind = p2
ownpal = 1
sprpriority = Ifelse(Random > 550, 2, -1)
ignorehitpause = 1

[State -2, Burning State is done]
type = Varset
triggerall = Var(18) = 1
trigger1 = Hitpausetime = 0
var(18) = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;Fireball Still Poweradds

[State -2, If Hit]
type = PowerAdd
trigger1 = Var(19) = 1
value = 30
persistent = 0

[State -2, If was Blocked]
type = PowerAdd
trigger1 = Var(19) = 2
value = 15
persistent = 0

[State -2, No more]
type = Varset
trigger1 = Var(19) > 0
var(19) = 0

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3, Just in case...]
type = ChangeState
trigger1 = Stateno = 0
trigger1 = Pos y != 0
value = 50
ctrl = 1

